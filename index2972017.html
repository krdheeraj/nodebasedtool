<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Auto Comp</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/png" href="favicon.ico"/>
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/icon.css">


        <link rel="stylesheet" href="datatable/datattable/jquery.dataTables.min.css" />
        <link rel="stylesheet" href="datatable/datattable/buttons.dataTables.min.css" />
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="bower_components/materialize/dist/css/materialize.min.css" />
        <!--<link rel="stylesheet" href="node_modules/materialize-clockpicker/dist/css/materialize.clockpicker.css" />-->
        <script>window.$ = window.jQuery = require('jquery');</script>
        <!--<script  src="./bower_components/jquery/dist/jquery.js"></script>-->
        <script src="bower_components/hammerjs/hammer.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="bower_components/materialize/dist/js/materialize.js"></script>
        <script src="readExcel.js"></script>
        <script src="jsforceConnection.js"></script>
        <script src="rutilityData.js"></script>
        <script src="rplatformData.js"></script>
        <script src="mapper.js"></script>
        <script src="frameHandler.js"></script>
        <script src="compOperation.js"></script>
        <script src="loginDetail.js"></script>
        <!--         <script src="mappingData.js"></script>-->
        <script src="bower_components/amcharts/amcharts.js"></script>
        <script src="bower_components/amcharts/serial.js"></script>
        <script src="bower_components/amcharts/export.min.js"></script>
        <link rel="stylesheet" href="bower_components/amcharts/export.css" type="text/css" media="all" />
        <script src="bower_components/amcharts/light.js"></script>
        <script src="bower_components/amcharts/jquery.dataTables.min.js"></script>
        <!--<script src="bower_components/materialize/dist/js/npm.js"></script>-->
        <!--        <script src = "autocomplete.js"></script>-->
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/rome/2.1.22/rome.js"></script>-->
        <!--<script src="node_modules/materialize-clockpicker/dist/js/materialize.clockpicker.js"></script>-->


        <style>
            .ts{
                color: black;
                font-size: 1rem;
                cursor: pointer;
                width: 100%;
            }
            .modal.bottom-sheet{
                max-height: 80%;
            }

            /*?????*/
            .wrap {
                position: absolute;
                overflow: hidden;
                /*top: 10%;*/top: 6%;
                right: 10%;
                bottom: 50px;/*bottom: 85px;*/
                left: 10%;
                padding: 20px 50px;
                display: block;
                border-radius: 4px;
                transform: translateY(20px);
                transition: all 0.5s;
                visibility: hidden;
            }
            .wrap .content {
                opacity: 0;
            }
            .wrap:before {
                position: absolute;
                width: 1px;
                height: 1px;
                background: rgba(0, 0, 0, 0.4);
                content: "";
                bottom: 10px;
                left: 50%;
                top: 95%;
                color: #00ff00;
                border-radius: 50%;
                -webkit-transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
                transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
            }
            .wrap.active {
                display: block;
                visibility: visible;
                box-shadow: 2px 3px 16px silver;
                transition: all 600ms;
                transform: translateY(0px);
                transition: all 0.5s;
                /*overflow-y: scroll;*/
            }
            .wrap.active:before {
                height: 2000px;
                width: 2000px;
                border-radius: 50%;
                top: 50%;
                left: 50%;
                margin-left: -1000px;
                margin-top: -1000px;
                display: block;
                -webkit-transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
                transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
            }
            .wrap.active .content {
                position: relative;
                z-index: 1;
                opacity: 1;

                transition: all 600ms cubic-bezier(0.55, 0.055, 0.675, 0.19);
            }

            a.button {
                padding: 11px 11px 13px 13px;
                outline: none;
                border-radius: 50%;
                background: #003e74;
                color: #fff;
                font-size: 0px;
                display: block;
                position: fixed;
                left: 50%;
                bottom: 0px;
                top: auto;
                margin-left: -25px;
                transition: transform 0.25s;
            }
            a.button:hover {
                text-decoration: none;
                background: #0277bd;
            }
            a.button.active {
                transform: rotate(135deg);
                transition: transform 0.5s;
            }
            table#example tfoot tr th{
                color: white;
                font-weight: bold;
            }
            table#example thead tr th{
                color: white;
                font-weight: bold;
            }
            table#example tbody tr td{
                color: white;
                background: transparent;
                padding: 0;
            }
            table.striped>tbody>tr:nth-child(odd) {
                background-color: lightsteelblue;
            }
            table.striped>tbody>tr>td {
                padding: 2.5px 1px;
            }
            table.striped>tbody>tr>td:nth-child(odd) {
                font-weight: bold;
            }
            table.dataTable thead th, table.dataTable thead td {
                color: white;
            }
            #validation_modal{
                width:70%;
            }
            .tabs{
                height: 30px;
                background: transparent;

            }
            .tabs .tab{
                height: 28px;
                line-height: 28px;
                background: transparent;
            }
            .tabs .tab a{
                /*//color: #039be5;*/
                color: white;
                font-size: 15px;
                text-transform: capitalize;
            }
            .tabs .tab a:hover, .tabs .tab a.active{
                /*color: #039be5;*/
                color: white;
                box-shadow: inset 0 16px 24px 2px rgba(255, 255, 255, 0.14), inset 0 6px 30px 5px rgba(255, 255, 255, 0.12), inset 0 8px 10px -5px rgba(255, 255, 255, 0.3);
            }
            .tabs .tab a i{
                /*color: #039be5;*/
                color: white;
                font-size: 15px;
            }
            .tabs .indicator{
                background: white;
            }
            .tabs .tab.disabled a, .tabs .tab.disabled a:hover{
                color: lightslategray;
            }
            .tabs .tab.disabled a i, .tabs .tab.disabled a:hover i{
                color: lightslategray;
            }

            table.bordered>thead{
                background-color: lightsteelblue;
                font-size: 12px;
            }
            #magcheck_content{

                background-color: lightgray;

            }
            .hide_mapped_tab{
                display: none;
            }
            .app_close:hover{
                box-shadow: inset 0px 0px 5px 5px rgba(255,255,255,0.5);
                cursor: pointer;
            }
            .app_close:hover i{
                color: red;
            }
            .app_refresh:hover{
                box-shadow: inset 0px 0px 5px 5px rgba(255,255,255,0.5);
                cursor: pointer;
            }
            .app_min:hover{
                box-shadow: 0px 0px 5px 5px rgba(255,255,255,0.5);
                cursor: pointer;
            }
            .border-bottom{
                margin-bottom: 15px;border: 1px solid #4CAF50;border-width: 0 0 2px 0;
            }
            #sf_login_user{
                float: right;
                border-radius: 50%;
                background: steelblue;
                width: 60px;
                height: 60px;  
                cursor: pointer;
            }
            #sf_login_user #sf_login_user_already{
                margin: 11.5px 5px;
                letter-spacing: 2px;
                color: white;
            }
            #sf_login_user:hover #sf_login_user_already{
                display: none;
            }
            .select-wrapper input.select-dropdown{
                height: 1.5rem;
                margin-bottom: 1px;
            }
            .col .button-collapse img:hover{
                box-shadow: inset 0 16px 24px 2px rgba(255, 255, 255, 0.14), inset 0 6px 30px 5px rgba(255, 255, 255, 0.12), inset 0 8px 10px -5px rgba(255, 255, 255, 0.3);
            }
            #mapped_chart_overlay{
                width: 95%;
                height: calc(50vh - 72.5px);
                background: rgba(155,155,155,0.5);
                position: absolute;top: 113px;
            }
            .no-flag{
                cursor: cell;
                text-align: center;
            }
            .flag{
                cursor: cell;
                text-align: center;
            }


            table#example tbody tr td.no-flag:hover{
                background: rgba(255,255,255,0.3);
            }


            table#example tbody tr td.flag:hover{
                background: rgba(255,255,255,0.3);
            }
            table#example tbody tr:hover{
                background: rgba(0,0,0,0.5);
            }
        </style>


    </head>
    <body>
        <!--Side Nav Menu-->
        <ul id="slide-out" class="side-nav">
            <li>
                <!--                <div class="userView" style="padding: 152px 32px 0;">
                                    <div class="background">
                                        <img src="office.jpg">
                                    </div>
                                </div>-->
            </li>

            <li>
                <div class="divider" style="margin: 0;height: 3px;"></div>
                <a class="subheader" style="font-size: 1.2rem;color: white;height: 32px;line-height: 32px;background: #003e74;">Mapped</a>
                <div class="divider" style="margin: 0;height: 3px;"></div>
            </li>
            <li class="no-padding">
                <ul class="collapsible collapsible-accordion" style="padding: 0 16px;">
                    <li>
                        <ul id="mapped_nav_sublist" style="line-height: 15px;">
                            <li><div class="divider" style="margin-top: 3px;height: 0px;"></div></li>
                        </ul>
                    </li>
                </ul>
            </li>

            <li>
                <div class="divider" style="margin: 0;height: 3px;"></div>
                <a class="subheader" style="font-size: 1.2rem;color: white;height: 32px;line-height: 32px;background: #003e74;">Mag Issue</a>
                <div class="divider" style="margin: 0;height: 3px;"></div>
            </li>
            <li class="no-padding">
                <ul class="collapsible collapsible-accordion" style="padding: 0 16px;">
                    <li>
                        <ul id="mapped_nav_sublist_mag" style="line-height: 15px;">
                            <li><div class="divider" style="margin-top: 3px;height: 0px;"></div></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>

        <div class="row" id="all_tabs" style="margin: 0;">
            <!--Header-->
            <div class="col m12  z-depth-3" style="background: #003e74;padding-top: 5px;margin-bottom: 10px;">

                <div class="col m11" style="text-align: center;padding: 0;width: calc(100% - 90px)">
                    <a href="#" data-activates="slide-out" class="button-collapse left">
                        <img src="images/EnerNOClogo_Basic_W.svg" style="padding: 0 4px;">
                        <!--<i class="material-icons">menu</i>-->
                    </a>
                    <a href="#" class="left" style="color: white;font-size: 1.35rem;line-height: 26px;font-weight: 300;padding-left: 5px;"><strong>|</strong> Auto Comp</a>
                    <!--                <label id="nav_tab_name" style="font-size: 1.2rem;">Input</label>-->

                    <div class="col s11 right" style="width: calc(100% - 300px)">
                        <ul class="tabs" style="">
                            <li class="tab col s2"><a class="active" href="#0" onclick="changeTab(0);" style="/*line-height:29px;font-size:1.2rem;*/"><i class="material-icons" style="vertical-align: middle;padding-bottom: 3px;">input</i> Input</a></li>
                            <li class="tab col s2"><a class="" href="#1" onclick="changeTab(1);"><i class="material-icons" style="vertical-align: middle;padding-bottom: 3px;">cloud</i> Salesforce</a></li>
                            <li class="tab col s2"><a class="" href="#2" onclick="changeTab(2);"><i class="material-icons" style="vertical-align: middle;padding-bottom: 3px;">info_outline</i> Utility Data</a></li>
                            <li class="tab col s2"><a class="" href="#3" onclick="changeTab(3);"><i class="material-icons" style="vertical-align: middle;padding-bottom: 3px;">info_outline</i> Platform Data</a></li>
                            <li class="tab col s2"><a class="" href="#4" onclick="changeTab(4);"><i class="material-icons" style="vertical-align: middle;padding-bottom: 3px;">swap_vert</i> Mapper</a></li>
                            <li class="tab col s2" id="tab_mapped"><a  class="" href="#5"  id="tab_mapped_a" ><i class="material-icons" style="vertical-align: middle;padding-bottom: 3px;">shuffle</i> Mapped </a></li>
                        </ul>
                    </div>
                    <!--                        <div id="test1" class="col s12">Test 1</div>
                                            <div id="test2" class="col s12">Test 2</div>
                                            <div id="test3" class="col s12">Test 3</div>
                                            <div id="test4" class="col s12">Test 4</div>-->

                </div>
                <div class="col m1 right hide-on-med-and-down app_close" onclick="closeWindow(false);" style="width: 30px;text-align: center;padding: 0;padding-top: 4px;">
                    <i class="material-icons white-text" style="font-size: 20px;">close</i>
                </div>
                <div class="col m1 right hide-on-med-and-down app_refresh" onclick="refreshWindow(false)" style="width: 30px;text-align: center;padding: 0;padding-top: 4px;">
                    <i class="material-icons white-text" style="font-size: 20px;">refresh</i>
                </div>
                <div class="col m1 right hide-on-med-and-down app_min" onclick="minimize();" style="width: 30px;text-align: center;padding: 0;padding-top: 4px;">
                    <i class="material-icons white-text" style="font-size: 20px;">remove</i>
                </div>
            </div>

            <!--            <div class="col m6 offset-m3" id="login_forum" style="margin-left:20%;margin-top:10px;display:none;">
                            <div class="row">
                            <div class="container">
                                <div class="row" style="margin-left:30%;">
                                    <img id="logo" class="standard_logo" src="images/salesforce.png" alt="Salesforce" border="0" name="logo" style="width:150px;height:100px;">  
                                </div>
                                <div class="conatiner" style="border-style: groove;/*margin-left: 10%;margin-bottom: 20px;*/width:400px;">
                                    <div class="row" style="margin-left: 15%;">
                                        <div class="input-field col s8">
                                            <input  id="username" type="text" class="validate">
                                            <label for="username">User Name</label>
                                        </div> 
                                    </div>
                                    <div class="row" style="margin-left:15%;">
                                        <div class="input-field col s8">
                                            <input  id="password" type="password" class="validate">
                                            <label for="password">Password</label>
                                        </div> 
            
                                    </div>
                                    <div class="row" style="margin-left:30%;">
                                        <a class="waves-effect waves-light btn" onclick='loginDetail();'>Login</a>
                                    </div>
                                </div>
                            </div>
                        </div> -->
            <!--Input Tab-->
            <div class="col m6 offset-m3 " id="input_tab" style="">


                <div class="input-field col s6" style="margin-top: 20%;">
                    <input placeholder="Enter Case Id" id="case_id" type="text" value="50013000010RXir" class="validate">
                    <label for="case_id">Case ID</label>
                </div>
                <div class="input-field col s3" style="margin-top: 20%;">
                    <input  id="start_date" type="date" class="datepicker" >
                    <label for="start_date">Start Date</label>
                </div>
                <div class="input-field col s3" style="margin-top: 20%;">
                    <input  id="end_date" type="date" class="datepicker">
                    <label for="end_date">End Date</label>
                </div>
                <!--                <a href="data:application/xml;charset=utf-8,your code here" download="sample.txt">Save</a>-->
                <div class="input-field col s2" style="margin: 0;margin-bottom: 10px;margin-top: 15px;">
                    <label for="csvFile" style="top: -21px;font-size: 0.8rem;">Browse Utility CSV</label>
                    <form action="#">
                        <div class="file-field input-field" style="margin: 0;">
                            <div class="waves-effect waves-light btn blue-grey" style="height: 2rem;line-height: 2rem;">
                                <span>File</span>
                                <input id="csvFile" type="file" title="Select ETL File" multiple >
                            </div>
                            <!--                            <div class="file-path-wrapper">
                                                            <input class="file-path validate" type="text" placeholder="Upload one or more files">
                                                        </div>-->
                        </div>
                    </form>
                </div>
                <div class="col s4" style="margin: 0;margin-bottom: 10px;margin-top: 15px;"></div>

                <div class="col s12" id="show_file_list"></div>
                <div class="col s3 offset-s6 " style="margin-bottom: 10px;padding-top: 12px;text-align: right;">
                    <input id="mnvflag" type="checkbox" class="filled-in" onchange="mnvCheck(this.checked);"/>
                    <!--mnvCheck(this.checked) load_mapped_graphflag-->
                    <label for="mnvflag">Insert M & V File</label>
                </div>
                <div id="nonmnv" class="col s3 " style="margin-bottom: 15px;">
                    <input type="hidden" id="uniqueids"/>
                    <input type="hidden" id="uniqueidspath"/>
                    <input type="hidden" id="mnvpath"/>
                    <a class="waves-effect waves-light btn blue-grey" onclick="startComp(false);"><i class="material-icons right">send</i>Start Comp</a>
                </div>
                <div id="mnv" class="input-field col s3" style="display: none;margin: 0;margin-bottom: 15px;">
                    <form action="#">
                        <div class="file-field input-field" style="margin: 0;">
                            <div class="waves-effect waves-light btn blue-grey" style="height: 36px;line-height: 36px;">
                                <i class="material-icons right">send</i>
                                <span>Start Comp</span>
                                <input id="mnvFile" type="file" multiple>
                            </div>
                            <!--                            <div class="file-path-wrapper">
                                                            <input class="file-path validate" type="text" placeholder="Upload one or more files">
                                                        </div>-->
                        </div>
                    </form>
                </div>
            </div>
            <!--Salesforce Tab-->
            <div class="col m12" id="salesforcedata_tab" style="display: none;">
                <div class="col m12 border-bottom" >
                    <div class="col m12">
                        <label for="sf_case_id" >Case ID</label>
                    </div>

                    <div class="col m4" >
                        <a id="sf_case_id"  style="font-size: 1.2rem;cursor: pointer;" ></a>
                    </div>
                    <div class="col m8" >
                        <label id="sf_subject" style="text-decoration: underline;font-size: 1.2rem;color: black;"></label>
                    </div>
                </div>
                <div class="col m12"  style="margin-bottom: 15px;">
                    <div class=" col s6">
                        <label for="sf_site_name"  >Site Name</label>
                    </div>
                    <div class=" col s6">
                        <label for="sf_site_id" >Site ID</label>
                    </div>
                    <div class=" col s6">
                        <label id="sf_site_name"  style="font-size: 1.2rem;color: black;" ></label>
                    </div>
                    <div class=" col s6">
                        <label id="sf_site_id"  style="font-size: 1.2rem;color: black;"></label>
                    </div>
                </div>
                <div class="col m12"  style="margin-bottom: 15px;">
                    <div class="col s6">
                        <label for="sf_registration" >Registration</label>
                    </div>
                    <div class="col s6">
                        <label for="sf_registration_id" >Registration ID</label>
                    </div>
                    <div class="col s6">
                        <label id="sf_registration" style="font-size: 1.2rem;color: black;" ></label>
                    </div>
                    <div class="col s6">
                        <label id="sf_registration_id" style="font-size: 1.2rem;color: black;" ></label>
                    </div>
                </div>
                <div class="col m12"  style="margin-bottom: 15px;">
                    <div class="col s6">
                        <label for="sf_start_date" >Start Date</label>
                    </div>
                    <div class="col s6">
                        <label for="sf_end_date" >End Date</label>
                    </div>
                    <div class="col s6">
                        <label id="sf_start_date"  style="font-size: 1.2rem;color: black;"></label>
                    </div>
                    <div class="col s6">
                        <label id="sf_end_date"  style="font-size: 1.2rem;color: black;"></label>
                    </div>
                </div>
                <div class="col m12"  style="margin-bottom: 15px;">
                    <div class="col s6">
                        <label for="sf_operator" >Operator</label>
                    </div>
                    <div class="col s6">
                        <label for="sf_owner_name" >Owner Name</label>
                    </div>
                    <div class="col s6">
                        <label id="sf_operator"  style="font-size: 1.2rem;color: black;"></label>
                    </div>
                    <div class="col s6">
                        <label id="sf_owner_name"  style="font-size: 1.2rem;color: black;"></label>
                    </div>
                </div>
                <div class="col m12" id="list_dsid" style="margin-bottom: 15px;">
                    <div class="col s12">
                        <label for="case_Interval" >Interval</label>
                    </div>

                    <div class="col s12">
                        <label id="case_Interval" style="font-size: 1.2rem;color: black;"></label>
                    </div>
                </div>
            </div>
            <!--Utility Tab-->
            <div class="col m12   grey lighten-5" id="utilitydata_tab" style="display: none;height: calc(100vh - 45px);max-height: calc(100vh - 45px);">
                <div id="utilitydata_tab_JSON" style="display: none;"></div>
                <div id="utilitydata_tab_info" class="col m2 z-depth-2 fixed" style="display: none;height: 150px;background: #eeeeee;padding-top: 5px;margin-bottom: 10px;position: fixed;bottom: 0;right: 20px;">
                    <div class="col m12">
                        <label class="left" id="startts">Start : </label>
                        <label class="right" id="endts">End   : </label>
                        <br>
                        <label id="shiftCount" class="left" style="font-size: 1.2rem;">0</label>
                        <span class="right">
                            <a class="btn-floating btn-small waves-effect waves-light red" id="-1" onclick="shiftUtilityDataUpDown(this, -1)" style="width: 25px;height: 25px;"><i class="material-icons" style="line-height: 20px;">arrow_drop_up</i></a>
                            <a class="btn-floating btn-small waves-effect waves-light red" id="1"  onclick="shiftUtilityDataUpDown(this, 1)" style="width: 25px;height: 25px;"><i class="material-icons" style="line-height: 20px;">arrow_drop_down</i></a>
                        </span>
                    </div>
                </div>
                <div class="col m12" id="utilityTimestamp" style="background: #01579b;"></div>
            </div>
            <!--Platform Tab-->
            <div class="col m12   grey lighten-5" id="platformdata_tab" style="display: none;height: calc(100vh - 48px);max-height: calc(100vh - 48px);">
                <div class="col m12" id="platformTimestamp" style="background: #01579b;"></div>
            </div>
            <!--Mapper Tab-->
            <div class="col m12" id="mapper_tab" style="display: none;height: calc(100vh - 48px);max-height: calc(100vh - 48px);">
                <div class="col m2 grey lighten-3" id="col_gooddata" style="margin: 0 0.75rem;">
                    <label style="font-size: 1rem;">Good Data</label>
                </div>
                <div class="col m4 grey lighten-3" id="col_platformdata" style="margin: 0 0.75rem;">
                </div>
                <div class="col m5 grey lighten-3" id="col_utilitydata" style="margin: 0 0.75rem;">
                </div>
                <a class="btn-floating btn-large waves-effect waves-light red right" id="open_Graph" style="bottom: 15px;position: fixed;right: 20px;" onclick=" $('#mapper_modal').modal('open');"><i class="material-icons">equalizer</i></a>
            </div>
            <!--Mapped Tab-->
            <div class="col m12" id="mapped_tab" style="display: none;height: calc(100vh - 48px);max-height: calc(100vh - 48px);">
                <div class="col m12 " id="col_mappeddata" style="margin: 0;">
                    <div class="col s12 border-bottom">
                        <h5 id="mapped_info">Display Name Goes Here ...</h5>
                    </div>
                    <div class="col s12" id="magcheck_content">
                        <div class="col s2">
                            <h6 style="font-weight: bold;">Correlation:</h6>
                        </div>
                        <div class="col s2">
                            <h6 id="magcheck_correlation" >N/A</h6>
                        </div>
                        <div class="col s4">
                            <h6 style="font-weight: bold;">Ratio(platform to utility):</h6>
                        </div>
                        <div class="col s2">
                            <h6 id="magcheck_ratio">N/A</h6>
                        </div>
                    </div>  
                    <table class="bordered" id="magCheck_table">
                        <thead>
                            <tr>
                                <th>Platform Meter</th>
                                <th>DSID</th>
                                <th>Utility Meter</th>
                                <th>ESS Type</th>
                                <th>Current PM</th>
                                <th>Suggested New PM Value</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td id="magcheck_platform_meter">N/A</td>
                                <td id="magcheck_dsid">N/A</td>
                                <td id="magcheck_utility_meter">N/A</td>
                                <td id="magcheck_ess_type">N/A</td>
                                <td id="magcheck_current_pm">N/A</td>
                                <td id="magcheck_suggested_new_pm">N/A</td>

                            </tr>
                        </tbody>

                    </table>
                    <div id="mapped_chart" class="col m12" style="width: 65%;height: calc(60vh - 87);"></div>
                    <div id="mapped_chart_overlay" class="col m12" style="display: none;"></div>

                    <a class="btn-floating btn red" href="#" id="validbutton" style="bottom: 5px;position: fixed;right: 13px;" title="Validation Result"><i class="large material-icons">verified_user</i></a>
                    <!--                    <a class="waves-effect waves-light btn" style="/*margin-left:700px;*/margin-top:3px;" onclick="suggestedInterval(mapped_chart, 0.5);">Suggested Interval</a>
                                        <a class="waves-effect waves-light btn" style="margin-left:10px;margin-top:3px;" onclick="flagContinuousEstimation(mapped_chart, 0.5);">Flag Continuous Estimation</a>
                                        <a class="waves-effect waves-light btn" style="margin-left:206px;margin-top:3px;" onclick="insertAll(mapped_chart, 0.5);">Insert All</a>
                                        <a class="waves-effect waves-light btn" style="margin-left:10px;margin-top:3px;" onclick="clearAll(mapped_chart);">Clear All</a>-->
                    <a class="button data_table" href="#"><i class="material-icons data-table ">add</i></a>
                    <!--                    <input type="checkbox" class="filled-in" name="dsid" id="mapped_data" onchange="mapper_checkdsid(this.checked);" />
                                        <label for="mapped_data" style="font-size: 1rem;">Platform Data</label>-->
                </div>
                <!--<a class="btn-floating btn-large waves-effect waves-light red right" style="bottom: 0;position: absolute;" onclick=" $('#mapper_modal').modal('open');"><i class="material-icons">equalizer</i></a>-->
            </div>
        </div>

        <!-- Mapper Modal Structure -->
        <div id="mapper_modal"  class="modal bottom-sheet">
            <div class="modal-content" style="padding: 0;">
                <div id="chartdiv" style="width : 100%;height : 450px;"></div>
            </div>
            <div class="modal-footer" style="height: 99px;">
                <div class="row" style="margin: 0;height: 100%;padding-top: 10px;">
                    <div class="col s2">
                        <div class="col s12">
                            <input id="mapper_shiftdata" type="checkbox" class="filled-in" onchange="mapperShiftData(this.checked)">
                            <label for="mapper_shiftdata" style="color: black;">Shift Utility Data</label>
                        </div>
                        <div id="mapper_shiftdata_start" class="col s12" style="display: none;">
                            <strong>Start&nbsp;:&nbsp;</strong>
                            <label  style="font-size: 0.9rem;color: black;">N/A</label>
                        </div>
                        <div id="mapper_shiftdata_end" class="col s12" style="display: none;">
                            <strong>End&nbsp;&nbsp;&nbsp;:&nbsp;</strong>
                            <label  style="font-size: 0.9rem;color: black;">N/A</label>
                        </div>
                    </div>
                    <div class="input-field col s1" style="margin: 0;width: 60px;">
                        <input type="number" id="mapper_shiftinterval" value="0" style="display: none;text-align: right;margin: 0;height: 1.4rem;" onchange="mapper_checkdsid_s(true);">
                        <label for="mapper_shiftinterval" class="active" style="display: none;">Interval</label>
                    </div>
                    <div class="col s3" style="width: calc(50% - 440px);">
                        <div class="col s12">
                            <input id="mapper_magnitude" type="checkbox" class="filled-in" onchange="mapperMagnitutdeCheck(this.checked)"/> 
                            <label for="mapper_magnitude" style="color: black;">Check Magnitude</label>
                        </div>
                        <div id="mapper_magnitude_start" class="col s12" style="display: none;">
                            <strong>Start&nbsp;:&nbsp;</strong>
                            <!--                            <input placeholder="mm/dd/yy hh:mm" type="text" class="validate"   name="mapper_magnitude_start" style="margin: 0;height: 1rem;width: calc(100% - 50px);">-->
                            <input placeholder="mm/dd/yy hh:mm" type="text" class="validate" name="mapper_magnitude_start" style="margin: 0;height: 1rem;width: calc(100% - 50px);"> 
                        </div>
                        <div id="mapper_magnitude_end" class="col s12" style="display: none;">
                            <strong>End&nbsp;&nbsp;&nbsp;:&nbsp;</strong>
                            <input placeholder="mm/dd/yy hh:mm" type="text" class="validate"  name="mapper_magnitude_end" style="margin: 0;height: 1rem;width: calc(100% - 50px);">
                        </div>
                    </div>
                    <div class="col s3" style="margin: 0;">
                        <div class="input-field  col s12" style="margin: 0;">
                            <select id="mapper_settlement_validation_select" disabled onchange="mapperSettelmentValidationCheck(this.value)">

                                <optgroup label="Validation">
                                    <option id="defaultSelect" value="" disabled selected>Choose your option</option>
                                    <option value="Validation">Acc Level Comp</option>
                                </optgroup>
                                <optgroup label="Settelment Ratio Insert">
                                    <option value="Settelment_Weighted_Ratio" >Weighted Ratio</option>
                                    <option value="Settelment_Equal_Ratio">Equal Ratio</option>
                                </optgroup>
                            </select>
                            <label>Select</label>
                        </div>

                        <div id="settlement_start_date" class="col s12" style="margin: 0;display:none;">
                            <strong>Start&nbsp;:&nbsp;</strong>
                            <input placeholder="mm/dd/yy hh:mm"  type="text" class="validate" name="settlement_start_date" onchange="" style="margin: 0;height: 1rem;width: calc(100% - 50px);">
                        </div>

                        <div id="settlement_end_date"  class="col s12" style="margin: 0;display:none;">
                            <strong>End&nbsp;&nbsp;&nbsp;:&nbsp;</strong>
                            <input placeholder="mm/dd/yy hh:mm" type="text" class="validate" name="settlement_end_date" style="margin: 0;height: 1rem;width: calc(100% - 50px);">
                        </div>
                    </div>
                    <a href="#!" class="modal-action modal-close waves-effect waves-green btn blue-grey" id="mapper_magnitude_confirm_issue" style="display: none;">Confirm Issue</a>
                    <a href="#!" class="modal-action modal-close waves-effect waves-green btn blue-grey" id="mapper_confirm_map" onclick="confirmMap('58109161', 'ACC888298048_MET230213888', 'Meter 141668042 (Sub 6 &amp; Buffer)(58109161)');">Confirm Map</a>
                </div>
                <!--                <label id="mapper_shiftdata_start" style="display: none;left: 10px;position: absolute;bottom: 5px;">Start: N/A</label>
                                <label id="mapper_shiftdata_end" style="display: none;left: 160px;position: absolute;bottom: 5px;">End: N/A</label>-->

            </div>
        </div>
        <!-- Notification Modal Structure -->
        <div id="sf_login_modal" class="modal" style="width: 20%;">
            <div class="modal-content">
                <div class="row border-bottom">
                    <div class="col s1" style="width: 100px;">
                        <img src="images/salesforce.png" style="width: 100px;"/>
                    </div>
                    <div class="col s3" style="margin: 5.8% 0;font-weight: bolder;">
                        Login
                    </div>
                    <div id="sf_login_user" style="display: none;">
                        <h4 id="sf_login_user_already" >AS</h4>
                        <h4 id="sf_login_user_change" style="margin: 19px 6px;letter-spacing: 2px;color: white;font-size: 0.6rem;text-align: center;">Change Account?</h4>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">account_circle</i>
                        <input id="sf_user_name" type="text" class="validate">
                        <label for="sf_user_name">Username</label>
                    </div>
                    <div class="input-field col s12">
                        <i class="material-icons prefix">lock</i>
                        <input id="sf_password" type="password" class="validate">
                        <label for="sf_password">Password</label>
                    </div>
                    <div class="input-field col s12">
                        <i class="material-icons prefix">vpn_key</i>
                        <input id="sf_key" type="text" class="validate">
                        <label for="sf_key">Password</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a id="sf_login_continue" href="#!" class="modal-action modal-close waves-effect waves-green btn" style="display: none;">Continue</a>
                <a id="sf_login_submit" href="#!" class="modal-action waves-effect waves-green btn" >Login</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" style="margin: 0 5px;">Close</a>

            </div>
        </div>
        <!-- Sales force Modal Structure -->
        <div id="sf_iframe_modal"  class="modal bottom-sheet">
            <div class="modal-content" style="padding: 0;">
                <iframe id="frame" src="" style="width: 100%;" height="450"></iframe>
            </div>
            <!--            <div class="modal-footer">
                            <a href="#!" class="modal-action modal-close waves-effect waves-green btn ">Confirm Map</a>
                        </div>-->
        </div>
        <!-- Confirm Modal Structure -->
        <div id="nav_tab_confirm_modal" class="modal">
            <div class="modal-content">
                <h4 class="border-bottom">Confirmation</h4>
                <p>Are you sure! you want to delete this?</p>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect  btn deep-orange" style="margin-left: 20px;margin-right: 24px;">No</a>
                <a id="modalConfirmYes" href="#!" class="modal-action modal-close waves-effect waves-green btn blue-grey">Yes</a>

            </div>
        </div>

        <!-- Notification Modal Structure -->
        <div id="notification_modal" class="modal">
            <div class="modal-content">
                <h4 class="border-bottom">Notification</h4>
                <p id="notification_modal_message">This Data Stream has been already mapped!</p>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn deep-orange" style="margin-left: 20px;margin-right: 24px;">Close</a>

            </div>
        </div>
        <!-- Alert Modal Structure -->
        <div id="alert_modal" class="modal">
            <div class="modal-content">
                <h4 id="alert_header" class="border-bottom">Notification</h4>
                <div id="alert_modal_message">This Data Stream has been already mapped!</div>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect  btn deep-orange" style="margin-left: 20px;margin-right: 24px;" id="alert_modal_no">No</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn blue-grey" id="alert_modal_yes">Yes</a>


            </div>
        </div>
        <!-- Loading Overlay Structure -->
        <div class="modal-overlay" id="loader" style="z-index: 1002; display: block; opacity: 0.5;display: none;">

            <div class="preloader-wrapper big active" style="margin-top: 30%;margin-left: 47.5%;">
                <div class="spinner-layer spinner-blue-only">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div><div class="gap-patch">
                        <div class="circle"></div>
                    </div><div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
            <h5 id="load_message" style="color: white;font-size: 1.25rem;text-align: center;">Please wait data downloading ....</h5>

        </div>
        <!-- Mapped Table Structure -->
        <div class='wrap'>
            <div class='content'>
                <table id="example"  class="display nowrap" cellspacing="0" width="100%" >
                    <thead>
                        <tr>
                            <th>Time Stamp</th>
                            <th>Platform Data</th>
                            <th>E. D. I.</th>
                            <th>Utility Data</th>
                            <th>% Difference</th>
                            <th>Maxwell Flag</th>
                            <th>E. D. I.</th>
                            <th>U.D.I</th>
                            <th>Insert</th>


                        </tr>
                    </thead>
                    <tbody>


                    </tbody>
                </table>
            </div>
        </div>
        <!-- Validation Modal Structure -->
        <div id="validation_modal" class="modal modal-fixed-footer">
            <div class="modal-content">

                <table class="striped" >
                    <tbody>
                        <tr>
                            <!-- Row contains EnerNOC Platform Peak & EnerNOC Platform Start Date -->
                            <td>EnerNOC Platform Peak</td>
                            <td id="valid_platform_peak">N/A</td>
                            <td>EnerNOC Platform Start Date</td>
                            <td id="valid_platform_start_date" >N/A</td>
                            <!-- Row contains EnerNOC Platform Peak & EnerNOC Platform Start Date -->
                        </tr>
                        <tr>
                            <!-- Row contains EnerNoc Platform Usage & EnerNoc Platform End Date  -->
                            <td>EnerNoc Platform Usage</td>
                            <td id="valid_platform_usage" >N/A</td>
                            <td>EnerNoc Platform End Date</td>
                            <td id="valid_platform_end_date"></td>
                            <!-- Row contains EnerNoc Platform Usage & EnerNoc Platform End Date  -->
                        </tr>
                        <tr>
                            <!-- Row Utility Peak & Utility Start Date  -->
                            <td>Utility Peak</td>
                            <td id="valid_utility_peak"></td>
                            <td>Utility Start Date</td>
                            <td id="valid_utility_start_date"></td>
                            <!-- Row Utility Peak & Utility Start Date  -->
                        </tr>
                        <tr>
                            <!-- Row contains Utility Usage & Utility End Date -->
                            <td>Utility Usage</td>
                            <td id="valid_utility_usage">N/A</td>
                            <td>Utility End Date</td>
                            <td id="valid_utility_end_date">N/A</td>
                            <!-- Row contains Utility Usage & Utility End Date -->
                        </tr>
                        <tr>
                            <!-- Row contains Percentage Difference -Peak & Correlation  -->
                            <td>Percentage Difference - Peak</td>
                            <td id="valid_percentage_peak">N/A</td>
                            <td>Correlation</td>
                            <td id="valid_correlation">N/A</td>
                            <!-- Row contains Percentage Difference -Peak & Correlation  -->
                        </tr>
                        <tr>
                            <!-- Row Percentage Difference-Usage &Comparison Units  -->
                            <td>Percentage Difference - Usage</td>
                            <td id="valid_percentage_usage">N/A</td>
                            <td>Comparison Units</td>
                            <td id="valid_comparison_units">N/A</td>
                            <!-- Row Percentage Difference-Usage &Comparison Units  -->
                        </tr>

                        <tr>
                            <!-- Row Legacy Percent Difference -Usage/day & Utility Data Source  -->
                            <td>Legacy Percent Difference -Usage/day</td>
                            <td id="valid_legacy_percent_usage_day">N/A</td>
                            <td>Utility Data Source</td>
                            <td id="valid_utility_data_source">N/A</td>
                            <!-- Row Legacy Percent Difference -Usage/day & Utility Data Source  -->
                        </tr>
                        <tr>
                            <!-- Row contains Comparison Location & Utility Data Source Details -->
                            <td>Comparison Location</td>
                            <td id="valid_comparison_location">N/A</td>
                            <td>Utility Data Source Details</td>
                            <td id="valid_utility_data_source_details">N/A</td>
                            <!-- Row contains Comparison Location & Utility Data Source Details -->
                        </tr>
                        <tr>
                            <!-- Row contains Comparison Completed Date & Utility Data Location   -->
                            <td>Comparison Completed Date</td>
                            <td id="valid_comparison_completed_date">N/A</td>
                            <td>Utility Data Location</td>
                            <td id="valid_utility_data_location" >N/A</td>
                            <!-- Row contains Comparison Completed Date & Utility Data Location  -->
                        </tr>
                        <tr>
                            <!-- Row contains Comparison Completed By & Platform Data Stream Name(s)  -->
                            <td>Comparison Completed By</td>
                            <td id="valid_comparison_completed_by">N/A</td>
                            <td>Platform Data Stream Name(s)</td>
                            <td id="valid_platform_data_stream_name">N/A</td>
                            <!-- Row contains Comparison Completed By & Platform Data Stream Name(s)  -->
                        </tr>
                        <tr>
                            <!-- Row Comparison Notes & Acceptance Sampling  -->
                            <td>Comparison Notes</td>
                            <td id="valid_comparison_notes">N/A</td>
                            <td>Acceptance Sampling</td>
                            <td id="valid_acceptance_sampling">N/A</td>
                            <!-- Row Comparison Notes & Acceptance Sampling  -->
                        </tr>

                        <tr>
                            <!-- Row contain Ratio -->
                            <td></td>
                            <td></td>
                            <td>Ratio</td>
                            <td id="valid_ratio">N/A</td>
                            <!-- Row contains & Ratio -->
                        </tr>
                        <tr>
                            <!-- Row contains Equipment CRM ID & % Intervals Not Matching  -->
                            <td>Equipment CRM ID</td>
                            <td id="valid_equipment_cr_id">N/A</td>
                            <td>% Intervals Not Matching</td>
                            <td id="valid_intervals_not_matching">N/A</td>
                            <!-- Row contains Comaprsion Location & % Intervals Not Matching  -->
                        </tr>
                        <tr>
                            <!-- Row contains  % Intervals in Range Compared  -->
                            <td></td>
                            <td></td>
                            <td>% Intervals in Range Compared</td>
                            <td id="valid_intervals_in_range_compared">N/A</td>
                            <!-- Row contains  % Intervals in Range Compared  -->
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <div class="row" style="margin-bottom:0px;">
                    <div id="valid_start_date_root" class="input-field col s3" style="/*margin-top: 20%;*/">
                        <input  id="valid_start_date" type="text" name="valid_start_date_root" style="margin: 0;height: 2rem;">
                        <label for="valid_start_date" style="margin-bottom: 10px;" class="active">Start Date</label>
                    </div>
                    <div id="valid_end_date_root" class="input-field col s3" style="/*margin-top: 20%;*/">
                        <input  id="valid_end_date" type="text" name="valid_end_date_root" style="margin: 0;height: 2rem;">
                        <label for="valid_end_date" style="margin-bottom: 10px;" class="active">End Date</label>
                    </div>
                    <a href="#!" class="modal-action waves-effect waves-green btn blue-grey">Update ECRM</a> 
                    <a href="#!" class="modal-action modal-close waves-effect waves-green btn deep-orange" style="margin-left: 20px;margin-right: 24px;">Close</a>
                    <a href="#!" class="modal-action waves-effect waves-green btn blue-grey" id="updateValidationValue">Apply</a>
                </div>

            </div>
        </div> 
        <!-- Magnitude check Model-->
        <div id="magCheck_modal" class="modal modal-fixed-footer" style=" width:75%;height: 38%;">
            <div class="modal-content">

            </div>
            <div class="modal-footer">
                <!--                <a href="#!" class="modal-action waves-effect waves-green btn-flat ">Update ECRM</a>-->
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Close</a>
            </div>
        </div> 
        <script>
            // location.reload();
//           console.log(window.location.href);
//           if(window.location.href.split('reload').length!=2){
//           window.location.href='file:///C:/Users/dheeraj.kumar/Documents/NetBeansProjects/AutoComp/Electron/autoComp.html?reload=false';
//       }
            var nav_open = false;
            // Initialize collapse button
            $(".button-collapse").sideNav();
            // Initialize collapsible (uncomment the line below if you use the dropdown variation)
            //$('.collapsible').collapsible();
            $('.datepicker').pickadate({
                selectMonths: true, // Creates a dropdown to control month
                selectYears: 15// Creates a dropdown of 15 years to control year
            }).on('change', function () {
//                $('.clockpicker.picker').addClass('picker--opened');
//                $('.clockpicker.picker').removeAttr('style');
//                $('.picker.picker--focused.picker--opened').attr('class', 'picker');
            });
//            $('#timepicker').pickatime({
//                autoclose: true,
//                twelvehour: false,
//                afterDone: function (Element, Time) {
//                    alert(Time);
//                }
//            });
//            $('#timepicker').pickatime('show');
//            $('#timepicker').pickatime('hide');

            $(document).ready(function () {
                // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
                $('.modal').modal();
                $('.collapsible').collapsible();
                $('select').material_select();
                //tabs
                $('ul.tabs').tabs();
                $('a .data-table').on('click', function () {

                    //*@Set @table._iDisplayLength to dataProvider.length
                    table.context[0]._iDisplayLength = mapped_chart.dataProvider.length;
                    table.draw();
//                    table.column(6).clear();
                    //table.column(6)=Array.apply(null, Array(mapped_chart.dataProvider.length)).map(function(){return 5});
                    for (var i = 0; i < jflags[jflagscount].flag.length; i++) {
                        $('#mapped_table_insert' + new Date(jflags[jflagscount].flag[i]).getTime()).html('TRUE');
                    }
                    var interval = (new Date(mapped_chart.dataProvider[0].times)) - (new Date(mapped_chart.dataProvider[1].times));
                    interval = Math.abs(interval) / 3600000;
                    table.context[0]._iDisplayLength = (1 / interval) * 24;
                    table.draw();
                    $('.wrap, a').toggleClass('active');
                    $('#example_filter label').attr('style', 'color:  #ffffff;');
                    $('#example_filter label').html('<input type="search" class="" placeholder="Search" aria-controls="example" style="height: 2rem;margin:0;border-bottom: 1px solid #ffffff;" >')
                    $('#example_filter label input').attr('style', 'height: 2rem;margin:0;border-bottom: 1px solid #ffffff;');
                    $('#example_info').attr('style', 'color:  #ffffff;');
                    if ($('#example_wrapper').children().length === 4) {
                        $('<a class="btn waves-effect waves-light blue-grey lighten-2" style="font-size: 0.8rem;text-transform: capitalize;line-height: 1.5rem;height: 24px;padding: 0 5px 0 5px;margin: 0 5px;" onclick="flagValUDI(mapped_chart);">Insert UDI Value</a><a class="btn waves-effect waves-light blue-grey lighten-2" style="font-size: 0.8rem;text-transform: capitalize;line-height: 1.5rem;height: 24px;padding: 0 5px 0 5px;margin: 0 5px;" onclick="suggestedInterval(mapped_chart, 0.5);">Suggested Interval</a><a class="btn waves-effect waves-light blue-grey lighten-2" style="font-size: 0.8rem;text-transform: capitalize;line-height: 1.5rem;height: 24px;padding: 0 5px 0 5px;margin: 0 5px;" onclick="flagContinuousEstimation(mapped_chart, 0.5);">Flag Continuous Estimation</a><a class="btn waves-effect waves-light blue-grey lighten-2" style="font-size: 0.8rem;text-transform: capitalize;line-height: 1.5rem;height: 24px;padding: 0 5px 0 5px;margin: 0 5px;" onclick="insertAll(mapped_chart, 0.5);">Insert All</a><a class="btn waves-effect waves-light deep-orange lighten-2" style="font-size: 0.8rem;text-transform: capitalize;line-height: 1.5rem;height: 24px;padding: 0 5px 0 5px;margin: 0 5px;" onclick="clearAll(mapped_chart);">Clear All</a>\n\
                            <form action="#" style="width: 120px;display: inline-block;">\n\
                        <div class="file-field input-field btn waves-effect waves-light btn blue-grey lighten-2" style="margin: 0;height: 24px;line-height: 1.5rem;padding: 0 5px;margin: 0px 5px;font-size: 0.8rem;text-transform: capitalize;">\n\
                                <span>Create Insert File</span>\n\
                                <input id="txtFile" type="file" title="Txt" webkitdirectory onchange="txt(' + jflags[jflagscount].id + ',$(this)[0].files[0].path,mapped_chart);" >\n\
                        </div>\n\
                    </form>').insertAfter('#example_filter');
                    }
                    return false;
                });
//                $(this).on('mousemove', function (e) {
//                    if (e.pageX < 3 && !nav_open) {
//                        // Show sideNav
//                        $('.button-collapse').sideNav('show');
//                        console.log('>>' + $('#sidenav-overlay').attr('style'));
//                        console.log($('body').children().eq($('body').children().length - 1).attr('id'));
//                        console.log($('body').children().eq($('body').children().length - 3).attr('id'));
//                        console.log('====================================================');
//                        if ($('body').children().eq($('body').children().length - 1).attr('id') === $('body').children().eq($('body').children().length - 3).attr('id')) {
//                            $('body').children().eq($('body').children().length - 1).remove();
//                        }
//                        $('body').append('<div id="sidenav-overlay" style="opacity: 1;" class=""></div>');
//                        nav_open = true;
//                    } else if (e.pageX > 300 && nav_open) {
//                        nav_open = false;
//                        $('.button-collapse').sideNav('hide');
////                        $('#sidenav-overlay').remove();
//
//                        $('#slide-out').attr('style', 'transform: translateX(-100%);');
//                        $('body').children().eq($('body').children().length - 1).remove();
//                    }
//                });
//                $(this).on('click', function (e) {
//                    if (nav_open) {
//                        nav_open = false;
//                    }
//                });
                $('#tab_mapped_a').on('click', function () {
                    $('.button-collapse').sideNav('show');
                });
            });
            var pageChangeAlt = false;
            var pageChangeCount = 0;
            $("body").hover(function () {
                this.focus();
            }, function () {
                this.blur();
            }).keydown(function (ev) {
                if (ev.keyCode === 18) {
                    pageChangeAlt = true;
                }
            }).keyup(function (ev) {
                var tabEnd = true;
                if (ev.keyCode === 18) {
                    pageChangeAlt = false;
                } else if (pageChangeAlt) {
                    if (ev.keyCode === 33 && pageChangeCount !== 0) {
                        pageChangeCount--;
                        console.log('Previous' + pageChangeCount);
                        tabEnd = false;
                    } else if (ev.keyCode === 34 && pageChangeCount < (4 + ($('#mapped_nav_sublist').children().length - 1) + ($('#mapped_nav_sublist_mag').children().length - 1))) {
                        pageChangeCount++;
                        console.log('Next' + pageChangeCount);
                        tabEnd = false;
                    }
                    if (pageChangeCount < 5) {
                        changeTab(pageChangeCount);
                        $('ul.tabs').tabs('select_tab', '' + pageChangeCount);
                    } else if ((($('#mapped_nav_sublist').children().length - 1) + ($('#mapped_nav_sublist_mag').children().length - 1) + 5) > pageChangeCount && !tabEnd) {
                        $('#loader').attr('style', 'z-index: 1002; display: block; opacity: 0.5;');
                        $('ul.tabs').tabs('select_tab', '5');
                        $('.tabs .tab .active').removeClass('active');
                        $('#tab_mapped_a').addClass('active');
                        $('ul.tabs').tabs();
                        if (($('#mapped_nav_sublist').children().length - 1 + 5) > pageChangeCount) {
                            $('#mapped_nav_sublist').children().eq(pageChangeCount - 4).children().eq(1).click();
                        } else if (($('#mapped_nav_sublist').children().length + $('#mapped_nav_sublist_mag').children().length - 2 + 5) > pageChangeCount) {
                            $('#mapped_nav_sublist_mag').children().eq(pageChangeCount - 4 - ($('#mapped_nav_sublist').children().length - 1)).children().eq(1).click();
                        }
                    }



                }
            });
        </script>
        <script>
            var createInserts = true;
            var jflags = [];
            var jflagscount = 0;
            jflags.push({'id': '', 'flag': [], 'flagTime': []});
//            jflags.push({'id':'','flag':[1,2,3]});
            var etlFiles = [];
            var shiftUtilDataPoints = {startid: '', endid: '', startscroll: 0, accountids: [], uniqueids: []};
            $('#mnvFile').on("change", function () {

                for (i = 0; i < $('input[id=mnvFile] ')[0].files.length; i++) {
                    $('#mnvpath').val($('#mnvpath').val() + $('input[id=mnvFile] ')[0].files[i].path + (i === ($('input[id=mnvFile] ')[0].files.length - 1) ? '' : 'gap'));
                    //etlFiles.push($('input[id=mnvFile]')[0].files[i].path);
                    //console.log($('#mnvpath').val($('input[id=mnvFile] ')[0].files[0].path));
                    // console.log($('#mnvpath').val($('input[id=mnvFile] ')[0].files[i].path));

                }

                startComp(false);
            });
            $('#csvFile').on("change", function () {

                var result = '';
                for (var i = 0; i < $('input[id=csvFile]')[0].files.length; i++) {
                    getStartEndDate($('input[id=csvFile] ')[0].files[i].path, i);
                }

                for (var i = 0; i < $('input[id=csvFile]')[0].files.length; i++) {
                    result += '<div class="col s12" data-path="' + $('input[id=csvFile] ')[0].files[i].path + '">';
                    result += '    <div class="chip tooltipped" data-position="right" data-delay="50" data-tooltip="">';
                    result += '        ' + $('input[id=csvFile]')[0].files[i].name + '';
                    result += '        <i class="close material-icons">close</i>';
                    result += '    </div>';
                    result += '</div>';
                    etlFiles.push($('input[id=csvFile]')[0].files[i].path);
                    //alert($('input[type=file] ')[0].files[i].path);
                }
                $('#show_file_list').html(result);
            });
            function mnvCheck(check) {
                if (check) {
                    $('#nonmnv').attr('style', 'margin-bottom: 15px;display: none');
                    $('#mnv').attr('style', 'margin: 0;margin-bottom: 15px;');
                } else {
                    $('#mnv').attr('style', 'display: none');
                    $('#nonmnv').attr('style', 'margin-bottom: 15px;');
                }
            }
            /**
             * Change Tab on basis of "count"
             * @description changeTab(count) method is used to change tabs on count changes.
             * @param {integer} count starts from 0 to 5
             * @return {void} 
             * */
            function changeTab(count) {
                var c = 0;
                //this loop hides all tabs
                $('#all_tabs').children().each(function () {
                    if (c !== 0) {
                        $(this).attr('style', 'display: none');
                    }
                    c++;
                });
                //switch differentiate on count for every tab
                switch (count) {
                    case 0:
                        //@global pageChangeCount : track curent active tab count
                        pageChangeCount = count;
                        $('#input_tab').removeAttr('style');
                        break;
                    case 1:
                        //@global pageChangeCount : track curent active tab count
                        pageChangeCount = count;
                        $('#salesforcedata_tab').removeAttr('style');
                        break;
                    case 2:
                        //@global pageChangeCount : track curent active tab count
                        pageChangeCount = count;
                        $('#utilitydata_tab').removeAttr('style');
                        $('#utilitydata_tab').attr('style', 'height: calc(100vh - 48px);max-height: calc(100vh - 48px);overflow-y: scroll;');
                        break;
                    case 3:
                        //@global pageChangeCount : track curent active tab count
                        pageChangeCount = count;
                        $('#platformdata_tab').removeAttr('style');
                        $('#platformdata_tab').attr('style', 'height: calc(100vh - 48px);max-height: calc(100vh - 48px);overflow-y: scroll;');
                        break;
                    case 4:
                        //@global pageChangeCount : track curent active tab count
                        pageChangeCount = count;
                        $('#loader').attr('style', 'display: none;');
                        $('#mapper_tab').removeAttr('style');
                        $('#mapper_tab').attr('style', 'height: calc(100vh - 48px);max-height: calc(100vh - 48px);overflow-y: scroll;');
                        break;
                    case 5:
                        $('#loader').attr('style', 'display: none;');
                        $('#mapped_tab').removeAttr('style');
                        $('#mapped_tab').attr('style', 'height: calc(100vh - 48px);max-height: calc(100vh - 48px);');
                        break;
                }
                // Hide sideNav
                $('.button-collapse').sideNav('hide');
            }
            /**
             * Start "Auto Comp"
             * @description this will start comp and start fetching salesforce data
             * @param {} 
             * @return {void} 
             * */
            function startComp(noPostETL) {
//                checkLogin();
//                =====

                if ($('input[id=csvFile]')[0].files.length === 0 && !noPostETL) {
                    $('#alert_modal_message').html('Do you want to continue without <strong>PostETL file</strong>?');
                    $('#alert_modal_yes').attr('onclick', 'startComp(true)');
                    $('#alert_modal').modal('open');
                    return;
                }
                //

                //etl file path in etlFiles
                //@loader start loading screen
                $('#loader').attr('style', 'z-index: 1002; display: block; opacity: 0.5;');
                //@salesForceCaseInfo() Call for case_id
                salesForceCaseInfo($('#case_id').val());
                //                filterMetaFile( $('#metapath').val());

                //                for (var i = 0; i < $('#uniqueidspath').val().split('$').length; i++) {
                //                    filterIt($('#uniqueidspath').val().split('$')[i], i, $('#uniqueids').val().split('$')[i], $('#uniqueidspath').val().split('$').length);
                //                }
            }
            /**
             * Unused Method
             * */
            function shiftAccountData(item, isCheck) {
                if (isCheck) {
                    shiftUtilDataPoints.accountids.push(($(item).attr('id').substring(0, 4) === 'info' ? $(item).attr('id').trim().replace('info', '') : $(item).attr('id')));
                    shiftUtilDataPoints.uniqueids.push($(item).attr('data'));
                } else {
                    shiftUtilDataPoints.accountids.pop(($(item).attr('id').substring(0, 4) === 'info' ? $(item).attr('id').trim().replace('info', '') : $(item).attr('id')));
                    shiftUtilDataPoints.uniqueids.pop($(item).attr('data'));
                }
                if ($(item).attr('id').substring(0, 4) === 'info') {
                    document.getElementById("" + $(item).attr('id').replace('info', '')).checked = isCheck;
                } else {
                    document.getElementById("info" + $(item).attr('id')).checked = isCheck;
                }
                console.log(shiftUtilDataPoints);
            }
            /**
             * Unused Method
             * */
            function shiftUtilityData(item) {

                if (shiftUtilDataPoints.startid === '') {
                    if (shiftUtilDataPoints.endid === '') {
                        shiftUtilDataPoints.startid = $(item).attr('id');
                        $(item).attr('style', 'background: #64dd17;')
                        $('#startts').text('Start : ' + $(item).text());
                        shiftUtilDataPoints.startscroll = $('#utilitydata_tab').scrollTop();
                    } else {
                        if (shiftUtilDataPoints.endid === $(item).attr('id')) {
                            shiftUtilDataPoints.endid = '';
                            $(item).removeAttr('style');
                            $('#endts').text('End   : ');
                        } else if (shiftUtilDataPoints.startid === '') {
                            if (parseInt(shiftUtilDataPoints.endid.replace('ts', '')) > parseInt($(item).attr('id').replace('ts', ''))) {
                                shiftUtilDataPoints.startid = $(item).attr('id');
                                $(item).attr('style', 'background: #64dd17;')
                                $('#startts').text('Start : ' + $(item).text());
                                shiftUtilDataPoints.startscroll = $('#utilitydata_tab').scrollTop();
                            }
                        }
                    }
                } else if (shiftUtilDataPoints.startid !== '') {
                    if (shiftUtilDataPoints.startid === $(item).attr('id')) {
                        shiftUtilDataPoints.startid = '';
                        $(item).removeAttr('style');
                        $('#startts').text('Start : ');
                        shiftUtilDataPoints.startscroll = 0;
                    } else if (shiftUtilDataPoints.endid === $(item).attr('id')) {
                        shiftUtilDataPoints.endid = '';
                        $(item).removeAttr('style');
                        $('#endts').text('End   : ');
                    } else if (shiftUtilDataPoints.endid === '') {
                        if (parseInt(shiftUtilDataPoints.startid.replace('ts', '')) < parseInt($(item).attr('id').replace('ts', ''))) {
                            shiftUtilDataPoints.endid = $(item).attr('id');
                            $(item).attr('style', 'background: #ff3d00;')
                            $('#endts').text('End   : ' + $(item).text());
                        }
                    }
                }
            }
            /**
             * Unused Method
             * */
            function shiftUtilityDataUpDown(item, shift) {
                console.log('shiftUtilityDataUpDown');
                $('#shiftCount').text(parseInt($('#shiftCount').text()) + shift);
                console.log('shiftUtilityDataUpDown:' + (parseInt($('#shiftCount').text()) + shift) + ', shift' + shift);
                console.log('shiftUtilDataPoints.accountids.length:' + shiftUtilDataPoints.accountids.length);
                for (var i = 0; i < shiftUtilDataPoints.accountids.length; i++) {
                    console.log('loop:' + i);
                    console.log('parseInt(shiftUtilDataPoints.startid.trim().replace(\'ts\',\'\'))!==1:' + parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')));
                    if (shift === -1) {

                        if (parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')) !== 1) {
                            //                        $("#controller > div:nth-child(" + (i) + ")").after("<div>great things</div>");
                            console.log('ID>' + shiftUtilDataPoints.accountids[i]);
                            //                            alert(shiftUtilDataPoints.startid);
                            console.log('count 0>' + parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')));
                            $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(10 + ((parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')) - 1) * 3)).remove();
                            $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(10 + ((parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')) - 1) * 3)).remove();
                            $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(10 + ((parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')) - 1) * 3)).remove();
                            shiftUtilDataPoints.startid = 'ts' + (parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')) - 1);
                            $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(11 + ((parseInt(shiftUtilDataPoints.endid.trim().replace('ts', '')) - 1) * 3)).after('<span class="left"></span><span class="right"></span><br>');
                            $('#utilitydata_tab').scrollTop(shiftUtilDataPoints.startscroll);
                        }
                    } else {
                        //                        alert(shiftUtilDataPoints.endid);
                        $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(10 + ((parseInt(shiftUtilDataPoints.endid.trim().replace('ts', '')) + 1) * 3)).remove();
                        $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(10 + ((parseInt(shiftUtilDataPoints.endid.trim().replace('ts', '')) + 1) * 3)).remove();
                        $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(10 + ((parseInt(shiftUtilDataPoints.endid.trim().replace('ts', '')) + 1) * 3)).remove();
                        shiftUtilDataPoints.endid = 'ts' + (parseInt(shiftUtilDataPoints.endid.trim().replace('ts', '')) + 1);
                        $('#' + shiftUtilDataPoints.accountids[i]).parent().children().eq(11 + ((parseInt(shiftUtilDataPoints.startid.trim().replace('ts', '')) - 1) * 3)).after('<span class="left"></span><span class="right"></span><br>');
                    }
                }
            }
            /**
             * Check/Uncheck all platform's dsid
             * @description mapper_checkdsid(checked) check/uncheck checkboxes list for all dsids of platform
             * @param {boolean} checked "TRUE/FALSE for check/uncheck" 
             * @return {void} 
             * */
            function mapper_checkdsid(checked) {
                //this loop check/uncheck all dsids list
                $("input[name=mapper_cb_dsid]").each(function () {
                    $(this).prop("checked", checked);
                });
                showPlatformData();
            }
            /**
             * Check/Uncheck all utility's uid
             * @description mapper_checkuid(checked) check/uncheck checkboxes list for all uids of utility
             * @param {boolean} checked "TRUE/FALSE for check/uncheck" 
             * @return {void} 
             * */
            function mapper_checkuid(checked) {
                //this loop check/uncheck all uids list
                $("input[name=mapper_cb_uniqueid]").each(function () {
                    $(this).prop("checked", checked);
                });
                showUtilityData();
            }
            /**
             * List all platform's dsid which is/are checked
             * @description mapper_checkdsid_s(checked) list all platform's dsid which is/are checked and query accordingly for data from R
             * @param {boolean} checked "TRUE/FALSE" 
             * @return {void} 
             * */
            function mapper_checkdsid_s(checked, value) {
                //uncheck all platform's dsid
                $('#mapper_platformdata').prop("checked", false);
                //@var good_arr all checked good's
                var good_arr = [];
                //@var dsdsid_arr all checked dsid's
                var dsid_arr = [];
                //@var uniqueid_arr Array : all checked uid's
                var uniqueid_arr = [];
                //@var dsid_name_arr Array : all checked dsid's name
                var dsid_name_arr = [];
                //this loop for Array : all dsid's checkboxes 
                $("input[name=mapper_cb_good]").each(function () {
                    //check whether this dsid is checked or not
                    if (this.checked) {
                        //push good dsid in array @good_arr
                        good_arr.push(parseInt($(this).val()));
                    }
                });
                //this loop for Array : all dsid's checkboxes 
                $("input[name=mapper_cb_dsid]").each(function () {
                    //check whether this dsid is checked or not
                    if (this.checked) {
                        //push dsid in array @dsid_arr
                        dsid_arr.push(parseInt($(this).val()));
                        //push dsid's name in array @dsid_name_arr
                        dsid_name_arr.push($('#mapper_' + $(this).attr('id')).text().replace('shuffle', ''));
                        if (dsid_arr.length > 1) {
                            $('#mapper_settlement_validation_select').prop('disabled', false);
                            $('#mapper_settlement_validation_select optgroup[label=Validation] #defaultSelect').prop('selected', false);
                            $('#mapper_settlement_validation_select optgroup[label=Validation] option[value=Validation]').prop('selected', true);
                            $('select').material_select();
                        } else {
                            $('#mapper_settlement_validation_select').prop('disabled', true);
                            $('#mapper_settlement_validation_select optgroup[label=Validation] #defaultSelect').prop('selected', true);
                            $('select').material_select();
                        }
                        $('#settlement_start_date').attr('style', 'display: none;');
                        $('#settlement_end_date').attr('style', 'display: none;');
                    }
                });
                //this loop for all uid's checkboxes 
                $("input[name=mapper_cb_uniqueid]").each(function () {
                    //check whether this uid is checked or not
                    if (this.checked) {
                        //push uid in array @ununiqueid_arr
                        uniqueid_arr.push(($(this).attr('id')));
                    }
                });
                //@var intervalShift interval shift count
                var intervalShift = parseInt($('#mapper_shiftinterval').val());
                //@var list_shiftRange interval shift Range[Start-End]
                var list_shiftRange = [];
                //Check if one or more than one dsid & uniqueid is checked
                if (!(dsid_arr.length === 0 && uniqueid_arr.length === 0)) {
                    //Check if one or more than one dsid checked
                    if (dsid_arr.length !== 0) {
                        //Check if mapper chart's dataProvider is not empty
                        if (chart.dataProvider.length !== 0) {
                            //push start Shift Range in array @list_shiftRange
                            list_shiftRange.push($('#mapper_shiftdata_start label').text());
                            //push end Shift Range in array @list_shiftRange
                            list_shiftRange.push(($('#mapper_shiftdata_end label').text() === 'N/A' ? chart.dataProvider[chart.dataProvider.length - 1].times : $('#mapper_shiftdata_end label').text()));
                            //Check if mapper magnitude checkbox is checked or not
                            if ($('#mapper_magnitude').prop('checked')) {
                                //@checkMagnitude() Call to fetch Map data from R for Mag check
                                checkMagnitude(dsid_arr, uniqueid_arr, intervalShift, list_shiftRange);
                            } else {
                                //@filfilterAndShowPlatformData() Call to fetch Map data from R
                                filterAndShowPlatformData(dsid_arr, uniqueid_arr, intervalShift, list_shiftRange);
                            }
                        }
                    }
                }
                //Check if one or more than one dsid & uniqueid is checked
                if (dsid_arr.length !== 0 && uniqueid_arr.length !== 0) {
                    //Check if mapper magnitude checkbox is checked or not
                    if ($('#mapper_magnitude').prop('checked')) {
                        //show Confirm Issue button
                        $('#mapper_magnitude_confirm_issue').removeAttr('style');
                        //hide Confirm Map button
                        $('#mapper_confirm_map').attr('style', 'display: none;');
                        //disable Settelement validation select
                        $('#mapper_settlement_validation_select').prop('disabled', true);
                        $('select').material_select();
                    } else {
                        //show Confirm Map button
                        $('#mapper_confirm_map').removeAttr('style');
                        //hide Confirm Issue button
                        $('#mapper_magnitude_confirm_issue').attr('style', 'display: none;');
                        if (dsid_arr.length > 1) {
                            //enable Settelement validation select for n:1
                            $('#mapper_settlement_validation_select').prop('disabled', false);
                            $('select').material_select();
                        }

                    }
                } else {
                    //hide Confirm Issue button
                    $('#mapper_magnitude_confirm_issue').attr('style', 'display: none;');
                    //hide Confirm Map button
                    $('#mapper_confirm_map').attr('style', 'display: none;');
                }
                //check if already any mapped tab is created for checked platform's dsid
                if ($('#mappedtab' + dsid_arr[0]).attr('style') === undefined || $('#magmappedtab' + dsid_arr[0]).attr('style') === undefined) {
                    //Check if mapper magnitude checkbox is checked or not
                    if ($('#mapper_magnitude').prop('checked') && $('#magmappedtab' + dsid_arr[0]).attr('style') === undefined) {
                        //Set onclick for confirm Issue button
                        $('#mapper_magnitude_confirm_issue').attr('onclick', 'confirmIssue(\'' + dsid_arr.join('gap') + '\', \'' + uniqueid_arr.join('gap') + '\', \'' + dsid_name_arr.join('gap') + '\');');
                    } else {
                        if ($('#mappedtab' + dsid_arr[0]).attr('style') === undefined) {
                            //Set onclick for confirm map button
                            $('#mapper_confirm_map').attr('onclick', 'confirmMap(\'' + good_arr.join('gap') + '\', \'' + dsid_arr.join('gap') + '\', \'' + uniqueid_arr.join('gap') + '\', \'' + dsid_name_arr.join('gap') + '\');');
                        }
                    }
                } else {
                    //show notification
                    $('#mapper_confirm_map').attr('onclick', '$(\'#notification_modal_message\').html(\'This Data Stream has been already mapped!\');$(\'#notification_modal\').modal(\'open\');');
                }
                if (checked) {
                    $('#good' + value).prop('disabled', false);
                } else {
                    $('#good' + value).prop('disabled', true);
                    $('#good' + value).prop('checked', false);
                }
            }
            /**
             * List all platform's uid which is/are checked
             * @description mapper_checkuid_s(checked) list all utility's uid which is/are checked and query accordingly for data from R
             * @param {boolean} checked "TRUE/FALSE" 
             * @return {void} 
             * */
            function mapper_checkuid_s(checked, value) {
                //uncheck all utility's uid
                $('#mapper_utilitydata').prop("checked", false);
                //@var good_arr all checked good's
                var good_arr = [];
                //@var dsdsid_arr Array : all checked dsid's
                var dsid_arr = [];
                //@var uniqueid_arr Array : all checked uid's
                var uniqueid_arr = [];
                //@var dsid_name_arr Array : all checked dsid's name
                var dsid_name_arr = [];
                //this loop for Array : all dsid's checkboxes 
                $("input[name=mapper_cb_good]").each(function () {
                    //check whether this dsid is checked or not
                    if (this.checked) {
                        //push good dsid in array @good_arr
                        good_arr.push(parseInt($(this).val()));
                    }
                });
                //this loop for all dsid's checkboxes 
                $("input[name=mapper_cb_dsid]").each(function () {
                    //check whether this dsid is checked or not
                    if (this.checked) {
                        //push dsid in array @dsid_arr
                        dsid_arr.push(parseInt($(this).val()));
                        //push dsid's name in array @dsid_name_arr
                        dsid_name_arr.push($('#mapper_' + $(this).attr('id')).text().replace('shuffle', ''));
                        if (dsid_arr.length > 1) {
                            $('#mapper_settlement_validation_select').prop('disabled', false);
                            $('#mapper_settlement_validation_select optgroup[label=Validation] #defaultSelect').prop('selected', false);
                            $('#mapper_settlement_validation_select optgroup[label=Validation] option[value=Validation]').prop('selected', true);
                            $('select').material_select();
                        } else {
                            $('#mapper_settlement_validation_select').prop('disabled', true);
                            $('#mapper_settlement_validation_select optgroup[label=Validation] #defaultSelect').prop('selected', true);
                            $('select').material_select();
                        }
                        $('#settlement_start_date').attr('style', 'display: none;');
                        $('#settlement_end_date').attr('style', 'display: none;');
                    }
                });
                //this loop for all uid's checkboxes 
                $("input[name=mapper_cb_uniqueid]").each(function () {
                    //check whether this uid is checked or not
                    if (this.checked) {
                        //push uid in array @ununiqueid_arr
                        uniqueid_arr.push(($(this).attr('id')));
                    }
                });
                //@var intervalShift interval shift count
                var intervalShift = parseInt($('#mapper_shiftinterval').val());
                //@var list_shiftRange interval shift Range[Start-End]
                var list_shiftRange = [];
                //Check if one or more than one dsid & uniqueid is checked
                if (!(dsid_arr.length === 0 && uniqueid_arr.length === 0)) {
                    //Check if one or more than one dsid checked
                    if (dsid_arr.length !== 0) {
                        //Check if mapper tt's dataProvider is not empty
                        if (chart.dataProvider.length !== 0) {
                            //push start Shift Range in array @list_shiftRange
                            list_shiftRange.push($('#mapper_shiftdata_start label').text());
                            //push end Shift Range in array @list_shiftRange
                            list_shiftRange.push(($('#mapper_shiftdata_end label').text() === 'N/A' ? chart.dataProvider[chart.dataProvider.length - 1].times : $('#mapper_shiftdata_end label').text()));
                        }
                        //Check if mapper magnitude is checked or not
                        if ($('#mapper_magnitude').prop('checked')) {
                            //@checkMagnitude() Call to fetch Map data from R for Mag check
                            checkMagnitude(dsid_arr, uniqueid_arr, 0, []);
                        } else {
                            //@filfilterAndShowPlatformData() Call to fetch Map data from R
                            filterAndShowPlatformData(dsid_arr, uniqueid_arr, 0, []);
                        }
                    }
                }
                //Check if one or more than one dsid & uniqueid is checked
                if (dsid_arr.length !== 0 && uniqueid_arr.length !== 0) {
                    //Check if mapper magnitude checkbox is checked or not
                    if ($('#mapper_magnitude').prop('checked')) {
                        //show Confirm Issue button
                        $('#mapper_magnitude_confirm_issue').removeAttr('style');
                        //hide Confirm Map button
                        $('#mapper_confirm_map').attr('style', 'display: none;');
                        //disable Settelement validation select
                        $('#mapper_settlement_validation_select').prop('disabled', true);
                        $('select').material_select();
                    } else {
                        //show Confirm Map button
                        $('#mapper_confirm_map').removeAttr('style');
                        //hide Confirm Issue button
                        $('#mapper_magnitude_confirm_issue').attr('style', 'display: none;');
                        if (dsid_arr.length > 1) {
                            //enable Settelement validation select for n:1
                            $('#mapper_settlement_validation_select').prop('disabled', false);
                            $('select').material_select();
                        }
                    }
                } else {
                    //hide Confirm Issue button
                    $('#mapper_magnitude_confirm_issue').attr('style', 'display: none;');
                    //show Confirm Map button
                    $('#mapper_confirm_map').attr('style', 'display: none;');
                }
                //check if already any mapped tab is created for checked platdform's dsid
                if ($('#mappedtab' + dsid_arr[0]).attr('style') === undefined) {
                    //Set onclick for confirm Map button
                    $('#mapper_confirm_map').attr('onclick', 'confirmMap(\'' + good_arr.join('gap') + '\', \'' + dsid_arr.join('gap') + '\', \'' + uniqueid_arr.join('gap') + '\', \'' + dsid_name_arr.join('gap') + '\');');
                } else {
                    //show notification
                    $('#mapper_confirm_map').attr('onclick', '$(\'notification_modal_message\').html(\'This Data Stream has been already mapped!\');$(\'#notification_modal\').modal(\'open\');');
                }
                if (checked) {
                    $('#good' + value).prop('disabled', false);
                } else {
                    $('#good' + value).prop('disabled', true);
                    $('#good' + value).prop('checked', false);
                }
            }
            /**
             * Shift mapper data for interval and period[Start-End]
             * @description mapperShiftData(checked) shift mapper chart data for interval and period[Start-End]
             * @param {boolean} checked "TRUE/FALSE for shift is checked or not" 
             * @return {void} 
             * */
            function mapperShiftData(checked) {
                //check if shift data checkboxe is checked or not
                if (checked) {
                    //@Set start date label visible
                    $('#mapper_shiftdata_start').attr('style', 'font-size: 0.9rem;color: black;');
                    //@Set end date label visible
                    $('#mapper_shiftdata_end').attr('style', 'font-size: 0.9rem;color: black;');
                    //@Set shift start date label to N/A
                    $('#mapper_shiftdata_start label').html('N/A');
                    //@Set shift end date label to N/A
                    $('#mapper_shiftdata_end label').html('N/A');
                    //@Set shift interval to 0
                    $('#mapper_shiftinterval').val(0);
                    $('#mapper_shiftinterval').attr('style', 'text-align: right;margin: 0;height: 1.4rem;');
                    $('label[for=mapper_shiftinterval]').attr('style', '');
                } else {
                    //hide shift start date label
                    $('#mapper_shiftdata_start').attr('style', 'display: none;');
                    //hide shift end date label
                    $('#mapper_shiftdata_end').attr('style', 'display: none;');
                    //hide shift interval
                    $('#mapper_shiftinterval').attr('style', 'display: none;');
                    $('label[for=mapper_shiftinterval]').attr('style', 'display: none;');
                    //@Set shift interval to 0
                    $('#mapper_shiftinterval').val(0);
                    //@Call mapper_checkdsid_s()
                    mapper_checkdsid_s(true);
                    chart.categoryAxis.guides.splice(0, 1);
                    //validate mapper chart
                    chart.validateData();
                }

            }
            /**
             * Change UI for magnitude check
             * @description mapperMagnitutdeCheck(checked) if magnitude is checked change confirm button to confirm issue vice versa.
             * @param {boolean} checked "TRUE/FALSE for magnitude is checked or not" 
             * @return {void} 
             * */
            function mapperMagnitutdeCheck(checked) {
                //check if magnitude is checked or not
                if (checked) {
                    //hide settlement start date label 

                    $('#mapper_settlement_validation_select').prop('disabled', false);
                    $('#settlement_start_date').attr('style', 'display: none;');
                    //hide settlement end date label 
                    $('#settlement_end_date').attr('style', 'display: none;');
                    //@Set mag start date label visible
                    $('#mapper_magnitude_start').attr('style', '');
                    //@Set mag end date label visible
                    $('#mapper_magnitude_end').attr('style', '');
                    //show confirm issue button
                    $('#mapper_magnitude_confirm_issue').removeAttr('style');
                    //hide confirm map button
                    $('#mapper_confirm_map').attr('style', 'display: none;');
                } else {
                    //show settlement start date label 
                    $('#settlement_start_date').attr('style', '');
                    //show settlement end date label 
                    $('#settlement_end_date').attr('style', '');
                    //hide mag start date label 
                    $('#mapper_magnitude_start').attr('style', 'display: none;');
                    //hide mag end date label 
                    $('#mapper_magnitude_end').attr('style', 'display: none;');
                    //show confirm map button
                    $('#mapper_confirm_map').removeAttr('style');
                    //hide confirm issue button
                    $('#mapper_magnitude_confirm_issue').attr('style', 'display: none;');
                }
                //@Call mapper_checkdsid_s()
                mapper_checkdsid_s(true);
            }
            /**
             * Change UI for magnitude check
             * @description mapperMagnitutdeCheck(checked) if magnitude is checked change confirm button to confirm issue vice versa.
             * @param {boolean} checked "TRUE/FALSE for magnitude is checked or not" 
             * @return {void} 
             * */
            function mapperSettelmentValidationCheck(val) {
                //check if magnitude is checked or not
                if (val === 'Validation') {
                    //@hide settlement start date
                    $('#settlement_start_date').attr('style', 'display: none;');
                    //@Set mag end date 
                    $('#settlement_end_date').attr('style', 'display: none;');
                } else {
                    //set mag start date label 
                    $('#settlement_start_date').attr('style', '');
                    //hide mag end date label 
                    $('#settlement_end_date').attr('style', '');
                    //show confirm map button

                }
                //@Call mapper_checkdsid_s()
                //mapper_checkdsid_s(true);
            }
            /**
             * Confirm map will create a mapped tab and change color of mapped dsid's and uid's
             * @description confirmMap(dsids, uids, dsidnames) confirm map will create a new tab under Mapped in side nav and random color picked for dsid's and uid's.
             * @param {string} dsids "dsids string contains list of all checked dsid's and joined by 'gap'" 
             * @param {string} uids "uids string contains list of all checked uid's and joined by 'gap'" 
             * @param {string} dsidnames "dsidnames string contains list of all checked dsid's name and joined by 'gap'" 
             * @return {void} 
             * */
            function confirmMap(gooddsid, dsids, uids, dsidnames) {

                console.log(gooddsid);
                console.log(dsids);
                console.log(uids);
                console.log(dsidnames);
                //@color Array : array of color used for checkboxes after confirm map
                var color = ['ff8a80', 'ff5252', 'ff1744', 'ff80ab', 'ff4081', 'f50057', 'c51162', '880e4f', '4a148c', 'ea80fc', 'e040fb', 'd500f9', 'aa00ff', '6200ea', 'b388ff', '7c4dff', '311b92', '6200ea', '1a237e', '8c9eff', '304ffe', '0d47a1', '82b1ff', '2979ff', '0d47a1', '01579b', '80d8ff', '0091ea', '00b0ff', '006064', '00b8d4', '00e5ff', '00838f',
                    '004d40', '00bfa5', '1de9b6', '00c853', '1b5e20', '00e676', '4caf50', '64dd17', '76ff03', '33691e', '8bc34a', 'eeff41', 'aeea00', '827717', 'cddc39',
                    'ffd600', 'ffab00', 'ff8f00', 'ffc400', 'e65100', 'ff6d00', 'ff9100', 'dd2c00', 'ff3d00', 'ff6e40', 'bf360c', 'f4511e',
                    '3e2723', '5d4037', 'a1887f', '616161', '9e9e9e', '90a4ae', '546e7a', '37474f'];
                //@colorCode String : generate randon number to pick color from array @color
                var colorCode = color[Math.abs(parseInt(68 - (Math.random() * 100)))];
                var platformLen = dsids.split('gap').length;
                var utilityLen = (uids === '' ? 0 : uids.split('gap').length);
                //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                for (var i = 0; i < platformLen; i++) {
                    console.log($('#magmappedtab' + dsids).attr('style') === undefined)
//                    console.log($('#done_mapper_' + dsids.split('gap')[i]).attr('style').split('display:').length)
                    console.log(dsids);
                    console.log($('#done_mapper_' + dsids.split('gap')[i]).attr('style'));
                    if ($('#done_mapper_' + dsids.split('gap')[i]).attr('style').split('display:').length > 1) {
                        colorCode = ($('#magmappedtab' + dsids).attr('style') === undefined ? colorCode : $('#magmappedtab' + dsids + ' a').attr('style').split('background:')[1].split(';')[0].replace('#', '').replace(' ', ''));
                    }
                    //check if dsid is already colored or not [i.e. colored dsid is already mapped and tab is generated in sidenav]
                    if ($('label[for=' + (platformLen === 1 ? dsids : dsids.split('gap')[i]) + ']').attr('style') === 'width: 100%;' || $('label[for=' + (platformLen === 1 ? dsids : dsids.split('gap')[i]) + ']').attr('style').split('color:').length === 2) {
                        //@Set dsid checkbox uncheck
                        $('#' + (platformLen === 1 ? dsids : dsids.split('gap')[i])).prop('checked', false);
                        //@Set color for dsid's label
                        $('label[for=' + (platformLen === 1 ? dsids : dsids.split('gap')[i]) + ']').attr('style', 'width: 100%;color: #' + colorCode + ';');
                        $('#done_mapper_' + dsids.split('gap')[i]).attr('style', 'float: right;margin-top: 5px;color: #' + colorCode + ';');
                        //@Set good data checkbox uncheck and disable
                        $('#good' + (platformLen === 1 ? dsids : dsids.split('gap')[i])).prop('checked', false);
                        $('#good' + (platformLen === 1 ? dsids : dsids.split('gap')[i])).prop('disabled', true);
                    }
                }
                //this loop for all checked uid's in @uids[array of uid's created by split string @uids by 'gap']
                for (var i = 0; i < utilityLen; i++) {
                    //check if uid's is already colored or not
                    if ($('label[for=' + uids.split('gap')[i] + ']').attr('style') === '') {
                        //@Set uid checkbox uncheck
                        $('#' + uids.split('gap')[i]).prop('checked', false);
                        //@Set color for uid's label
                        $('label[for=' + uids.split('gap')[i] + ']').attr('style', 'color: #' + colorCode + ';');
                    }
                }
                //@list_shiftRange Array : store shift start & end range
                var list_shiftRange = [];
                //push start Shift Range in array @list_shiftRange
                list_shiftRange.push($('#mapper_shiftdata_start label').text());
                //push end Shift Range in array @list_shiftRange
                list_shiftRange.push($('#mapper_shiftdata_end label').text());
                /**
                 * List on mapped tab checkbox
                 * */
                //                var result = '   <br> <input type="checkbox" class="filled-in" name="mapped_cb_id" id="' + dsids + '@' + uids + '" value="' + dsids + '@' + uids + '" onchange="mapped_checkid_s(this.checked);"/>';
                //                result += '    <label id="mapper_' + dsids + '@' + uids + '" for="' + dsids + '@' + uids + '" style="">' + dsidnames.split('gap').join(', ') + ' : ' + uids.split('gap').join(', ') + '</label>';
                //                $('#col_mappeddata').append(result);

                //hide confirm map button
                $('#mapper_confirm_map').attr('style', 'display: none;');
                //remove disable from mapped tab
                $('#tab_mapped').removeClass('disabled');
                //@Nr1 Boolean : defines n ratio 1 [i.e. n platform(dsid) mapping to 1 utility(uid)]
                var Nr1 = false;
                //var dsidNamecheck="";
                //check if more than one dsid's checked
                if (dsids.split('gap').length > 1) {
                    //@resultTab String : store names(concat all names) for checked dsid's
                    var resultTab = '';
                    //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                    for (var i = 0; i < dsids.split('gap').length; i++) {
                        resultTab += dsidnames.split('gap')[i].trim();
                        if (i !== (dsids.split('gap').length - 1)) {
                            resultTab += ', ';
                        }
                    }
                    //@result String : html code for mapped tab in side nav under mapped [Sum tab]
                    var result = '';
                    result += '<li style="display: inline-flex;" id="mappedtab' + dsids + '" >';
                    result += '     <i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i>';
                    result += '     <a href="#!" onclick="mapped_nav_tab(true,';
                    result += '      \'Sum-' + resultTab + '\',';
                    result += '      \'' + dsids + '\',';
                    result += '      \'' + uids + '\',';
                    result += '      ' + parseInt($('#mapper_shiftinterval').val()) + ',';
                    result += '      \'' + list_shiftRange + '\',';
                    result += '      \'' + $('#mapper_settlement_validation_select').val() + '\',';
                    result += '      \'' + $('#settlement_start_date').val() + 'gap' + $('#settlement_end_date').val() + '\',';
                    result += '      \'\',';
                    result += '      \'\')"';
                    result += '      style="background: #' + colorCode + ';width: 230px;font-size: 0.9rem;padding: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;"';
                    result += '      title="' + resultTab + '">';
                    result += '         Sum-' + resultTab;
                    result += '     </a>';
                    result += '     <a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(false,\'' + dsids + '\', \'' + dsids + '\', \'' + uids + '\')">';
                    result += '         <i class="material-icons" style="margin: 0;line-height: 22px;height: 22px;">delete_forever</i>';
                    result += '     </a>';
                    result += '     <div class="hide_mapped_tab" style="position: absolute;left: 276px;float: left;margin-left: 14px;width: 0;height: 0;border-top: 10px solid transparent;border-bottom: 10px solid transparent;border-right: 10px solid #00c853;"></div>';
                    result += '</li>';
                    //append html code in side nav under mapped 
                    $('#mapped_nav_sublist').append(result);
                    //@Set @Nr1 TRUE  
                    Nr1 = true;
                }
                //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                for (var i = 0; i < dsids.split('gap').length; i++) {

                    //@result String : html code for mapped tab in side nav under mapped [Individual tabs]
                    //In this case if our map type is either validation or Nr1 is true then in tahat case no multiple tab will be generated.
//                    var result = ($('#mapper_settlement_validation_select').val() === 'Validation' && Nr1 ? '' : '<li style="display: inline-flex;' + (Nr1 === true ? 'padding-left: 10px;' : '') + '" id="mappedtab' + dsids.split('gap')[i] + '"><i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i><a href="#!" onclick="mapped_nav_tab(false, \'' + dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i] + '\', \'' + dsids.split('gap') + '\', \'' + uids.split('gap') + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\', false, false, \'' + $('#settlement_start_date').val() + 'gap' + $('#settlement_end_date').val() + '\')" style="background: #' + colorCode + ';width: 230px;font-size: 0.' + (Nr1 === true ? '7' : '9') + 'rem;padding: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;"  title="' + dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i] + '">' + (dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i]) + '</a>' + (!Nr1 ? '<a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(\'' + dsids.split('gap')[i] + '\', \'' + dsids + '\', \'' + uids + '\')"><i class="material-icons" style="margin: 0;line-height: 22px;height: 22px;">delete_forever</i></a>' : '') + '<div class="hide_mapped_tab" style="position: absolute;left: 276px;float: left;margin-left: 14px;width: 0;height: 0;border-top: 10px solid transparent;border-bottom: 10px solid transparent;border-right: 10px solid #00c853;"></div></li>');
                    var dsidCheckName = dsids;
                    //alert(dsidCheckName);
                    var result = '';
                    if ($('#mapper_settlement_validation_select').val() === 'Validation' && Nr1) { //check multiple tab will be generated or not
                    } else { //
                        result += '<li style="display: inline-flex;' + (Nr1 === true ? 'padding-left: 10px;' : '') + '" id="mappedtab' + dsids.split('gap')[i] + '" >';
                        result += '     <i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i>';
                        result += '     <a href="#!" onclick="mapped_nav_tab(false,';
                        result += '      \'' + dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i] + '\',';
                        result += '      \'' + dsids.split('gap')[i] + '\',';
                        result += '      \'' + uids + '\',';
                        result += '      ' + parseInt($('#mapper_shiftinterval').val()) + ',';
                        result += '      \'' + list_shiftRange + '\',';
                        result += '      \'' + $('#mapper_settlement_validation_select').val() + '\',';
                        result += '      \'' + $('#settlement_start_date input').val() + 'gap' + $('#settlement_end_date input').val() + '\',';
                        result += '      \'' + dsids + '\',';
                        result += '      \'' + gooddsid + '\')"';
                        result += '      style="background: #' + colorCode + ';width: 230px;font-size: 0.' + (Nr1 === true ? '7' : '9') + 'rem;padding: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;"';
                        result += '      title="' + dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i] + '">';
                        result += '      ' + (dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i]);
                        result += '     </a>';
                        if (!Nr1) {
                            result += '      <a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(false, \'' + dsids.split('gap')[i] + '\', \'' + dsids + '\', \'' + uids + '\')">';
                            result += '          <i class="material-icons" style="margin: 0;line-height: 22px;height: 22px;">delete_forever</i>';
                            result += '      </a>';
                        }
                        result += '     <div class="hide_mapped_tab" style="position: absolute;left: 276px;float: left;margin-left: 14px;width: 0;height: 0;border-top: 10px solid transparent;border-bottom: 10px solid transparent;border-right: 10px solid #00c853;"></div>';
                        result += '</li>';
                    }

                    //append html code in side nav under mapped 
                    $('#mapped_nav_sublist').append(result);
                    /**ckeck propery not valid case considered START*/
                    if (utilityLen !== 0) {
                        var validstart = ($('#settlement_start_date input').val());
                        var validend = ($('#settlement_end_date input').val());
                        var validateDateRange = validstart.split('/')[2].substring(0, 4) + '-' + validstart.split('/')[0] + '-' + validstart.split('/')[1] + ' ' + validstart.split('/')[2].substring(5, 13) + 'gap' + validend.split('/')[2].substring(0, 4) + '-' + validend.split('/')[0] + '-' + validend.split('/')[1] + ' ' + validend.split('/')[2].substring(5, 13);
                        $('#validbutton').attr('onclick', 'fetchValidationData( \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange.join('gap') + '\',\'' + $('#mapper_settlement_validation_select').val() + '\',\'' + validateDateRange + '\',\'' + dsids + '\',\'' + gooddsid + '\')');
                        //$('#validbutton').attr('onclick', 'fetchValidationData( \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange.join('gap') + '\',\'' + $('#mapper_settlement_validation_select').val() + '\',\'' + validateDateRange+ '\',\'' + dsids + '\',\'' + gooddsid + '\')');
                    } else {
                        $('#open_Graph').hide(); //open_Graph
                        $('#validbutton').attr('style', 'display: none;');
                    }

                    var startDate = document.getElementById('valid_start_date').value;
                    var endDate = document.getElementById('valid_end_date').value;
                    list_shiftRange = startDate + "gap" + endDate;
                    $('#updateValidationValue').attr('onclick', 'updateValidation( \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\')');
                    /**ckeck propery not valid case considered END*/

                }

            }
            /**
             * Confirm issue will create a mapped tab and change color of mapped dsid's and uid's
             * @description confirmIssue(dsids, uids, dsidnames) confirm issue will create a new tab under Mag Issue in side nav and random color picked for dsid's and uid's.
             * @param {string} dsids "dsids string contains list of all checked dsid's and joined by 'gap'" 
             * @param {string} uids "uids string contains list of all checked uid's and joined by 'gap'" 
             * @param {string} dsidnames "dsidnames string contains list of all checked dsid's name and joined by 'gap'" 
             * @return {void} 
             * */
            function confirmIssue(dsids, uids, dsidnames) {
                console.log(dsids);
                console.log(uids);
                console.log(dsidnames);
                //var dsidNamecheck=dsids;
                //@color Array : array of color used for checkboxes after confirm map
                var color = ['ff8a80', 'ff5252', 'ff1744', 'ff80ab', 'ff4081', 'f50057', 'c51162', '880e4f', '4a148c', 'ea80fc', 'e040fb', 'd500f9', 'aa00ff', '6200ea', 'b388ff', '7c4dff', '311b92', '6200ea', '1a237e', '8c9eff', '304ffe', '0d47a1', '82b1ff', '2979ff', '0d47a1', '01579b', '80d8ff', '0091ea', '00b0ff', '006064', '00b8d4', '00e5ff', '00838f',
                    '004d40', '00bfa5', '1de9b6', '00c853', '1b5e20', '00e676', '4caf50', '64dd17', '76ff03', '33691e', '8bc34a', 'eeff41', 'aeea00', '827717', 'cddc39',
                    'ffd600', 'ffab00', 'ff8f00', 'ffc400', 'e65100', 'ff6d00', 'ff9100', 'dd2c00', 'ff3d00', 'ff6e40', 'bf360c', 'f4511e',
                    '3e2723', '5d4037', 'a1887f', '616161', '9e9e9e', '90a4ae', '546e7a', '37474f'];
                //@colorCode String : generate randon number to pick color from array @color
                var colorCode = color[Math.abs(parseInt(68 - (Math.random() * 100)))];
                var platformLen = dsids.split('gap').length;
                var utilityLen = (uids === '' ? 0 : uids.split('gap').length);
                //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                for (var i = 0; i < dsids.split('gap').length; i++) {
                    console.log($('#done_mapper_' + dsids.split('gap')[i]).attr('style').split('display:').length)
                    console.log($('#mappedtab' + dsids).attr('style') === undefined)
                    if ($('#done_mapper_' + dsids.split('gap')[i]).attr('style').split('display:').length === 1) {
                        colorCode = ($('#mappedtab' + dsids).attr('style') === undefined ? colorCode : $('#mappedtab' + dsids + ' a').attr('style').split('background:')[1].split(';')[0].replace('#', '').replace(' ', ''));
                    }
                    //check if dsid is already colored or not [i.e. colored dsid is already mapped and tab is generated in sidenav]
                    if ($('label[for=' + dsids.split('gap')[i] + ']').attr('style') === 'width: 100%;') {
                        //@Set dsid checkbox uncheck
                        $('#' + dsids.split('gap')[i]).prop('checked', false);
                        //@Set color for dsid's label
                        $('label[for=' + dsids.split('gap')[i] + ']').attr('style', 'width: 100%;color: #' + colorCode + ';');
                        //@Set good data checkbox uncheck and disable
                        $('#good' + (platformLen === 1 ? dsids : dsids.split('gap')[i])).prop('checked', false);
                        $('#good' + (platformLen === 1 ? dsids : dsids.split('gap')[i])).prop('disabled', true);
                    }
                }
                //this loop for all checked uid's in @uids[array of uid's created by split string @uids by 'gap']
                for (var i = 0; i < uids.split('gap').length; i++) {
                    //check if uid's is already colored or not
                    if ($('label[for=' + uids.split('gap')[i] + ']').attr('style') === '') {
                        //@Set uid checkbox uncheck
                        $('#' + uids.split('gap')[i]).prop('checked', false);
                        //@Set color for uid's label
                        $('label[for=' + uids.split('gap')[i] + ']').attr('style', 'color: #' + colorCode + ';');
                    }
                }

                //@list_shiftRange Array : store shift start & end range
                var list_shiftRange = [];
                //push start Shift Range in array @list_shiftRange
                list_shiftRange.push($('#mapper_shiftdata_start label').text());
                //push end Shift Range in array @list_shiftRange
                list_shiftRange.push($('#mapper_shiftdata_end label').text());
                /**
                 * List on mapped tab checkbox
                 * */
                //var result = '   <br> <input type="checkbox" class="filled-in" name="mapped_cb_id" id="' + dsids + '@' + uids + '" value="' + dsids + '@' + uids + '" onchange="mapped_checkid_s(this.checked);"/>';
                //                result += '    <label id="mapper_' + dsids + '@' + uids + '" for="' + dsids + '@' + uids + '" style="">' + dsidnames.split('gap').join(', ') + ' : ' + uids.split('gap').join(', ') + '</label>';
                //                $('#col_mappeddata').append(result);

                //hide confirm issue button
                $('#mapper_magnitude_confirm_issue').attr('style', 'display: none;');
                //uncheck magnitude check
                $('#mapper_magnitude').prop('checked', false);
                //hide magnitude start & end date
                $('#mapper_magnitude_start').attr('style', 'display: none;');
                $('#mapper_magnitude_end').attr('style', 'display: none;');
                //remove disable from mapped tab
                $('#tab_mapped').removeClass('disabled');
//                $('#tab_mapped_a').addClass('button-collapse');
//                $(".button-collapse").sideNav();
                //@Nr1 Boolean : defines n ratio 1 [i.e. n platform(dsid) mapping to 1 utility(uid)]
                var Nr1 = false;
                //check if more than one dsid's checked
                if (dsids.split('gap').length > 0) {
                    //@resultTab String : store names(concat all names) for checked dsid's
                    var resultTab = '';
                    //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                    for (var i = 0; i < dsids.split('gap').length; i++) {
                        resultTab += dsidnames.split('gap')[i].trim();
                        if (i !== (dsids.split('gap').length - 1)) {
                            resultTab += ', ';
                        }
                    }
                    //@result String : html code for mapped tab in side nav under mag issue [Sum tab]
                    //alert('Hello .....');
                    //var result = '<li style="display: inline-flex;" id="mappedtab' + dsids + '"><i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i><a href="#!" onclick="mapped_nav_tab_mag(true,\'Mag Check Sum-' + resultTab + '\', \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\', false, false, \' '\',\\',\,\'' + $('#mapper_magnitude_start input').val() + 'gap' + $('#mapper_magnitude_end input').val() + '\''\',\'\',\'\')" style="background: #' + colorCode + ';width: 230px;font-size: 0.9rem;padding-right: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;" title="Mag Check Sum-' + resultTab + '">' + ('Mag Check Sum-' + resultTab) + '</a><a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(\'' + dsids + '\', \'' + dsids + '\', \'' + uids + '\')"><i class="material-icons" style="margin: 0;line-height: 22px;height: 22x;">delete_forever</i></a></li>';
                    //var result = '<li style="display: inline-flex;" id="mappedtab' + dsids + '"><i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i><a href="#!" onclick="mapped_nav_tab_mag(true,\'Mag Check Sum-' + resultTab + '\', \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\', false, false, \' '+ $('#mapper_magnitude_start input').val() + 'gap' + $('#mapper_magnitude_end input').val() +)" style="background: #' + colorCode + ';width: 230px;font-size: 0.9rem;padding-right: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;" title="Mag Check Sum-' + resultTab + '">' + ('Mag Check Sum-' + resultTab) + '</a><a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(\'' + dsids + '\', \'' + dsids + '\', \'' + uids + '\')"><i class="material-icons" style="margin: 0;line-height: 22px;height: 22x;">delete_forever</i></a></li>';
                    var magrange = $('#mapper_magnitude_start input').val().split(' ')[0].trim().split('/')[2] + '-' + $('#mapper_magnitude_start input').val().split(' ')[0].trim().split('/')[0] + '-' + $('#mapper_magnitude_start input').val().split(' ')[0].trim().split('/')[1] + ' ' + $('#mapper_magnitude_start input').val().split(' ')[1] + 'gap' + $('#mapper_magnitude_end input').val().split(' ')[0].trim().split('/')[2] + '-' + $('#mapper_magnitude_end input').val().split(' ')[0].trim().split('/')[0] + '-' + $('#mapper_magnitude_end input').val().split(' ')[0].trim().split('/')[1] + ' ' + $('#mapper_magnitude_end input').val().split(' ')[1];
                    var result = '<li style="display: inline-flex;" id="magmappedtab' + dsids + '"><i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i><a href="#!" onclick="mapped_nav_tab_mag(true,\'Mag Check ' + (dsids.split('gap').length > 1 ? 'Sum' : '') + '-' + resultTab + '\', \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\', \'' + magrange + '\')" style="background: #' + colorCode + ';width: 230px;font-size: 0.9rem;padding: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;" title="Mag Check Sum-' + resultTab + '">' + ('Mag Check ' + (dsids.split('gap').length > 1 ? 'Sum' : '') + '-' + resultTab) + '</a><a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(true,\'' + dsids + '\', \'' + dsids + '\', \'' + uids + '\')"><i class="material-icons" style="margin: 0;line-height: 22px;height: 22x;">delete_forever</i></a></li>';
                    //append html code in side nav under mapped 
                    $('#mapped_nav_sublist_mag').append(result);
                    //@Set @Nr1 TRUE  
                    Nr1 = true;
                }
                //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                for (var i = 0; i < dsids.split('gap').length; i++) {

                    //@result String : html code for mapped tab in side nav under mag issue [Individual tabs]
                    //not required //var result = ($('#mapper_acc_level_comparision').is(":checked") && Nr1 ? '' : '<li style="display: inline-flex;' + (Nr1 === true ? 'padding-left: 10px;' : '') + '" id="mappedtab' + dsids.split('gap')[i] + '"><i class="material-icons " style="color: #b71c1c;margin: 0;line-height: 22px;height: 22px;">done</i><a href="#!" onclick="mapped_nav_tab_mag(false, \'' + dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i] + '\', \'' + dsids.split('gap') + '\', \'' + uids.split('gap') + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\', false, false, \'' + $('#settlement_start_date').val() + 'gap' + $('#settlement_end_date').val() + '\')" style="background: #' + colorCode + ';width: 230px;font-size: 0.' + (Nr1 === true ? '7' : '9') + 'rem;padding: 0 0 0 10px;height: 22px;line-height: 22px;display: block;white-space: normal;text-overflow: ellipsis;overflow: hidden;color: white;"  title="' + dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i] + '">' + (dsids.split('gap')[i] + '-' + dsidnames.split('gap')[i]) + '</a>' + (!Nr1 ? '<a style="width: 30px;font-size: 0.7rem;padding: 0;height: 20px;cursor: pointer;" onclick="removeMappedTab(\'' + dsids.split('gap')[i] + '\', \'' + dsids + '\', \'' + uids + '\')"><i class="material-icons" style="margin: 0;line-height: 22px;height: 22px;">delete_forever</i></a>' : '') + '<div class="hide_mapped_tab" style="position: absolute;left: 276px;float: left;margin-left: 14px;width: 0;height: 0;border-top: 10px solid transparent;border-bottom: 10px solid transparent;border-right: 10px solid #00c853;"></div></li>');
                    //append html code in side nav under mapped         
                    //not required //$('#mapped_nav_sublist_mag').append(result);
                    /**ckeck propery not valid case considered START*/
                    //not required //if (utilityLen !== 0) {
                    //not required //    $('#validbutton').attr('onclick', 'fetchValidationData( \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange.join('gap') + '\')');
                    //not required //} else {
                    //not required //    $('#validbutton').hide();
                    //not required //    $('#open_Graph').hide();
                    //not required //}
                    //not required //var startDate = document.getElementById('valid_start_date').value;
                    //not required //var endDate = document.getElementById('valid_end_date').value;
                    //not required //list_shiftRange = startDate + "gap" + endDate;
                    //not required //console.log(list_shiftRange);
                    //not required //$('#updateValidationValue').attr('onclick', 'updateValidation( \'' + dsids + '\', \'' + uids + '\', ' + parseInt($('#mapper_shiftinterval').val()) + ', \'' + list_shiftRange + '\')');
                    /**ckeck propery not valid case considered END*/
                }
            }
            /**
             * Open mapped tab and display mapped graph
             * @description mapped_nav_tab(sum, name, dsids, uids, intrvalShift, shiftRange, map_type, map_range) 
             *              open mapped tab and displays mapped graph with data table and validation 
             * @param {boolean} sum "TRUE/FALSE validates if tab is Sum tab or individual tab" 
             * @param {string} name "mapped tab name including dsids & uids" 
             * @param {string} dsids "dsids string contains list of all checked dsid's and joined by 'gap'" 
             * @param {string} uids "uids string contains list of all checked uid's and joined by 'gap'" 
             * @param {integer} intrvalShift "interval shift count" 
             * @param {array} shiftrange "interval shift Range contains period for shift data[Start - end]"
             * @param {string} map_type "Mapping type to differentiate validation and settlement"
             * @param {string} map_range "Mapping range contains period for ration inserts[Start - end]" 
             * @return {void} 
             * */
            function mapped_nav_tab(sum, name, dsids, uids, intrvalShift, shiftRange, map_type, compdsids, gooddsid, map_range) {
                r('mapped_nav_tab', '2021');
                var isjflags = false;
                if (sum) {
                    if (map_type === "Validation") {
                        createInserts = false;
                        jflagscount = 0;
                        $('.data_table').attr('style', 'display: none');
                        $('#validbutton').attr('style', 'bottom: 5px;position: fixed;right: 13px;');
                    } else {
                        isjflags = true;
                        createInserts = true;
                        $('.data_table').attr('style', '');
                        $('#validbutton').attr('style', 'bottom: 5px;position: fixed;right: 13px;');
                    }
                } else {
                    if (map_type === "null") {
                        isjflags = true;
                        createInserts = true;
                        $('.data_table').attr('style', '');
                        $('#validbutton').attr('style', 'bottom: 5px;position: fixed;right: 13px;');
                    } else {
                        for (var i = 1; i < jflags.length; i++) {
                            if (jflags[i].id.trim().split('gap').indexOf(dsids) >= 0) {
                                jflagscount = i;
                                break;
                            }
                        }
                        createInserts = false;
                        $('.data_table').attr('style', 'display: none');
                        $('#validbutton').attr('style', 'display: none');
                    }

                }
                if (isjflags) {
                    console.log('mapped_chart.categoryAxis.guides');
                    console.log(mapped_chart.categoryAxis);
                    var checkflags = true;
                    for (var i = 1; i < jflags.length; i++) {
                        if (jflags[i].id === dsids) {
                            checkflags = false;
                            jflagscount = i;
                            break;
                        }
                    }
                    if (jflags.length === 0 || checkflags) {
                        jflagscount = jflags.length;
                        jflags.push({'id': dsids, 'flag': [], 'flagTime': []});
                    }
                }
                console.log(jflags);
                r('mapped_nav_tab', '2071');
                //@Set Name in mapped tab heading
                $('#mapped_info').html(name + '<span class="right" id="mapped_keys_info" style="font-size: 1rem;"></span>');
                //@count integer : set to default 4 for counting tabs
                var count = 4;
                //this loop for all mapped tabs generated under mapped
                $('#mapped_nav_sublist').children().each(function () {
                    //incrementing @count by 1
                    count++;
                    //checks if mapped tab id is equals to @param dsids
                    if ($(this).attr('id') === 'mappedtab' + dsids) {
                        //@global pagepageChangeCount : set current active tab count to global
                        pageChangeCount = count - 1;
                    }
                });
                //this loop for hiding all tabs
                $('.show_mapped_tab').each(function () {
                    $(this).attr('class', 'hide_mapped_tab');
                });
                //shows active icon <| in side nav for opened tab
                $('#mappedtab' + dsids).children().eq(3).attr('class', 'show_mapped_tab');
                //@Call changeTab(5) : Open Mapped tab
                changeTab(5);
                //checks if any extra overlay div is present in body
                if ($('body').children().eq($('body').children().length - 1).attr('id') === $('body').children().eq($('body').children().length - 3).attr('id') || $('body').children().eq($('body').children().length - 1).attr('id') === $('body').children().eq($('body').children().length - 2).attr('id')) {
                    //remove extra overlay div
                    $('body').children().eq($('body').children().length - 1).remove();
                }
                //@Set underline for tab "Mapped" in header nav
                $('ul.tabs').tabs('select_tab', '5');
                //remove active class from active tab
                $('.tabs .tab .active').removeClass('active');
                //@Set add active class to "Mapped" tab
                $('#tab_mapped_a').addClass('active');
                $('ul.tabs').tabs();
                $('#mapped_chart').attr('style', 'width: 100%;height: calc(50vh - 72.5px);overflow: hidden;text-align: left;');
                $('#magcheck_content').attr('style', 'display: none;');
                $('#magCheck_table').attr('style', 'display: none;');
                r('mapped_nav_tab>fetchMappedData', '2110');
                //@Call fetchMappedData() : update data fetched from R
                fetchMappedData(dsids.split('gap'), uids.split('gap'), intrvalShift, shiftRange.split(','), map_type, compdsids, gooddsid, map_range);
            }
            /**
             * Open mapped tab and display mapped graph
             * @description mapped_nav_tab_mag(sum, name, dsids, uids, intrvalShift, shiftRange, acc_lvl_comp, no_good_range, goodRange) 
             *              open mapped tab and displays mapped graph with data table and validation 
             * @param {boolean} sum "TRUE/FALSE validates if tab is Sum tab or individual tab" 
             * @param {string} name "mapped tab name including dsids & uids" 
             * @param {string} dsids "dsids string contains list of all checked dsid's and joined by 'gap'" 
             * @param {string} uids "uids string contains list of all checked uid's and joined by 'gap'" 
             * @param {integer} intrvalShift "interval shift count" 
             * @param {array} shiftrange "interval shift Range contains period for shift data[Start - end]"
             * @param {boolean} acc_lvl_comp "TRUE/FALSE validates if mapping had account level comparision [i.e. Mapping is not 1:1]"
             * @param {boolean} no_good_range "TRUE/FALSE validates if mapping had No good range [i.e. Mapping is not 1:1]" 
             * @param {array} goodRange "goodRange for mapping [Start - End]" 
             * @return {void} 
             * */
            function mapped_nav_tab_mag(sum, name, dsids, uids, intrvalShift, shiftRange, mag_range) {
                createInserts = false;
                $('.data_table').attr('style', 'display: none;');
                $('#validbutton').attr('style', 'display: none;');
                //@Set Name in mapped tab heading and Mag Check button after heading
                $('#mapped_info').html(name + '<span class="right" id="mapped_keys_info" style="font-size: 1rem;"></span>');
                //@count integer : set to default (4 + Mapped tabs under Mapped) for counting tabs
                var count = 4 + $('#mapped_nav_sublist').children().length - 1;
                //this loop for all mapped tabs generated under mag Issue
                $('#mapped_nav_sublist_mag').children().each(function () {
                    //incrementing @count by 1
                    count++;
                    //checks if mapped tab id is equals to @param dsids
                    if ($(this).attr('id') === 'mappedtab' + dsids) {
                        //@global pagepageChangeCount : set current active tab count to global
                        pageChangeCount = count - 1;
                    }
                });
                //this loop for hiding all tabs
                $('.show_mapped_tab').each(function () {
                    $(this).attr('class', 'hide_mapped_tab');
                });
                //shows active icon <| in side nav for opened tab
                $('#mappedtab' + dsids).children().eq(3).attr('class', 'show_mapped_tab');
                //@Call changeTab(5) : Open Mapped tab
                changeTab(5);
                //checks if any extra overlay div is present in body
                if ($('body').children().eq($('body').children().length - 1).attr('id') === $('body').children().eq($('body').children().length - 3).attr('id') || $('body').children().eq($('body').children().length - 1).attr('id') === $('body').children().eq($('body').children().length - 2).attr('id')) {
                    //remove extra overlay div
                    $('body').children().eq($('body').children().length - 1).remove();
                }
                //@Set underline for tab "Mapped" in header nav
                $('ul.tabs').tabs('select_tab', '5');
                //remove active class from active tab
                $('.tabs .tab .active').removeClass('active');
                //@Set add active class to "Mapped" tab
                $('#tab_mapped_a').addClass('active');
                $('ul.tabs').tabs();
                $('#magcheck_content').attr('style', '');
                $('#magCheck_table').attr('style', '');
                fetchMappedMagCheck(dsids, uids, intrvalShift, shiftRange.split(',').join('gap'), mag_range);
                //@Call fetchMappedData() : update data fetched from R
//                fetchMappedData(dsids.split('gap'), uids.split('gap'), intrvalShift, shiftRange.split(','), map_type, map_range, compdsids, gooddsid);
            }
            /**
             * Remove mapped tab
             * @description removeMappedTab(id, dsids, uids)
             *              open confirmation Dialog to confirm delete
             * @param {string} id "id string contains 'id' of deleting mapped tab" 
             * @param {string} dsids "dsids string contains list of all checked dsid's and joined by 'gap'" 
             * @param {string} uids "uids string contains list of all checked uid's and joined by 'gap'" 
             * @return {void} 
             * */
            function removeMappedTab(isMag, id, dsids, uids) {
                //@Set onclick for Yes on confirmation dialog
                $('#modalConfirmYes').attr('onclick', 'removeMappedTabConfirm(' + isMag + ',\'' + id + '\', \'' + dsids + '\', \'' + uids + '\')');
                //Open confirmation dialog
                $('#nav_tab_confirm_modal').modal('open');
            }
            /**
             * Remove mapped tab after confirmation
             * @description removeMappedTabConfirm(id, dsids, uids)
             *              remove individual(single) mapped tab if mapped 1:1 else mapped n:1 remove all individual and sum tab
             * @param {string} id "id string contains 'id' of deleting mapped tab" 
             * @param {string} dsids "dsids string contains list of all checked dsid's and joined by 'gap'" 
             * @param {string} uids "uids string contains list of all checked uid's and joined by 'gap'" 
             * @return {void} 
             * */
            function removeMappedTabConfirm(isMag, id, dsids, uids) {
                //remove mapped tab for 'id'
//                alert($('#magmappedtab' + id).length);
//                alert($('#mappedtab' + id).length);
                $('#' + (isMag ? 'mag' : '') + 'mappedtab' + id).remove();
                //this loop for all checked dsid's in @dsids[array of dsid's created by split string @dsids by 'gap']
                for (var i = 0; i < dsids.split('gap').length; i++) {
                    //@Set default color for respective checkbox on mapper tab
                    if ($('#magmappedtab' + id).length === 0 && $('#mappedtab' + id).length === 0) {
                        $('label[for=' + dsids.split('gap')[i] + ']').attr('style', 'width: 100%;');
                    }
                    //remove mapped tab from side nav individual
                    if (!isMag) {
                        $('#mappedtab' + dsids.split('gap')[i]).remove();
                        $('#done_mapper_' + dsids.split('gap')[i]).attr('style', 'display: none;');
                    }
                }
                //this loop for all checked uid's in @uids[array of uid's created by split string @uids by 'gap']
                for (var i = 0; i < uids.split('gap').length; i++) {
                    //@Set default color for respective checkbox on mapper tab
                    if ($('#magmappedtab' + id).length === 0 && $('#mappedtab' + id).length === 0) {
                        $('label[for=' + uids.split('gap')[i] + ']').attr('style', '');
                    }
                }

                //this loop for removing flags for the removing tab
                if (!isMag) {
                    for (var i = 1; i < jflags.length; i++) {
                        if (jflags[i].id.trim().split('gap').indexOf(dsids) >= 0) {
                            jflagscount = 0;
                            jflags.splice(i, 1);
                            break;
                        }
                    }
                }
            }
            /**
             * Mapper Graph
             * */
            //@table element : datatable element
            var table;
            //@chart element : mapper chart element
            var chart;
            //@call initMapperGraph()  : initialize mapper graph with single axis on left side [i.e. no mag check]
            initMapperGraph([{"axisAlpha": 0.5}]);
            /**
             * Initialize mapper graph
             * @description initMapperGraph(valueAxes)
             *              initalize mapper graph on mapper tab with single axis on left side
             * @param {JSON} valueAxes "valueAxes contains json data value for chart Key 'valueAxes'" 
             * @return {void} 
             * */
            function initMapperGraph(valueAxes) {
                //Amcharts make chart for mapper_chart for 'chartdiv'
                chart = AmCharts.makeChart("chartdiv", {
                    "type": "serial",
                    "theme": "light",
                    "marginRight": 80,
                    "dataProvider": [],
                    "valueAxes": valueAxes,
                    "graphs": [{
                            "id": "g2",
                            "balloonText": "[[title]]: [[value]]",
                            "lineThickness": 2,
                            "title": "Utility",
                            "lineColor": "#000000",
                            "valueField": "kWh",
                            "connect": false,
                            "valueAxis": "VUtility"
                        }, {
                            "id": "g1",
                            "balloonText": "[[title]]: [[value]]",
                            "lineThickness": 2,
                            "title": "Platform",
                            "fillColorsField": "estimated",
                            "lineColorField": "estimated",
                            "valueField": "demand",
                            "valueAxis": "VPlatform"
                        }],
                    "zoomOutButtonRollOverAlpha": 0.15,
                    "chartCursor": {
                        "categoryBalloonDateFormat": "MMM DD JJ:NN",
                        "cursorPosition": "mouse",
                        "showNextAvailable": true
                    },
                    "autoMarginOffset": 5,
                    "columnWidth": 1,
                    "categoryField": "times",
                    "categoryAxis": {
                        "minPeriod": "mm",
                        "parseDates": true
                    },
                    "chartScrollbar": {
                        "graph": "g1",
                        "oppositeAxis": false,
                        "offset": 30,
                        "scrollbarHeight": 30,
                        "backgroundAlpha": 0,
                        "selectedBackgroundAlpha": 0.1,
                        "selectedBackgroundColor": "#888888",
                        "graphFillAlpha": 0,
                        "graphLineAlpha": 0.5,
                        "selectedGraphFillAlpha": 0,
                        "selectedGraphLineAlpha": 1,
                        "autoGridCount": true,
                        "color": "#AAAAAA"
                    },
                    "chartScrollbarSettings": {
                        "graph": "g1",
                    },
                    "export": {
                        "enabled": false
                    },
                    "listeners": [{
                            "event": "init",
                            "method": function (e) {//on chart init this method will called
                                //@Set ShiftIsDown in e.chart [i.e. default value is set to False, shift button is currently not pressed]
                                e.chart.ShiftIsDown = false;
                                //mouse hover on mapper_modal window and callback fuction on keyDown and keyUp
                                $("#mapper_modal").hover(function () {
                                    this.focus();
                                }, function () {
                                    //this.blur();
                                }).keydown(function (ev) {
                                    //checks if down key value is 16 [i.e. Shift Key]
                                    if (ev.keyCode === 16) {
                                        //@Set e.chart.ShiftIsDown to true
                                        e.chart.ShiftIsDown = true;
                                    }
                                }).keyup(function (ev) {
                                    //check if shift key is already down
                                    if (e.chart.ShiftIsDown) {
                                        //checks if last key up is 16 (i.e. Shift Key) else any other key up
                                        if (ev.keyCode === 16) {
                                            //@Set e.chart.ShiftIsDown to false
                                            e.chart.ShiftIsDown = false;
                                        } else{ 
                                            if (ev.keyCode === 37 || ev.keyCode === 39 ){//37 39
                                            console.log(ev.keyCode);
                                            alert( e.chart.ShiftIsDown+'..'+$('#mapper_shiftinterval').val());
                                            //@Set shift interval count into mapper_shiftinterval[i.e. if ev.keyCode is 37 than decrease interval by 1 or ev.keyCode is 39 than increase interval by 1 ] 
                                           // alert( $('#mapper_shiftinterval').val((parseInt($('#mapper_shiftinterval').val()) + (ev.keyCode === 37 ? (-1) : (ev.keyCode === 39 ? 1 : 0)))));
                                           // $('#mapper_shiftinterval').val((parseInt($('#mapper_shiftinterval').val()) + (ev.keyCode === 37 ? (-1) : (ev.keyCode === 39 ? 1 : 0))));
                                           if(ev.keyCode === 37){
                                               //alert((parseInt($('#mapper_shiftinterval').val())));
                                               var mappedLeftShift=(parseInt($('#mapper_shiftinterval').val())-1)+3;
                                               alert(mappedLeftShift);
                                             $('#mapper_shiftinterval').val(mappedLeftShift) ; 
                                           }
                                           else{
                                               //alert((parseInt($('#mapper_shiftinterval').val())+1));
                                               var mappedRightShift=(parseInt($('#mapper_shiftinterval').val())+1)-3;
                                               alert(mappedRightShift);
                                               $('#mapper_shiftinterval').val(mappedRightShift) ;
                                                
                                           }
                                           
                                           // alert( $('#mapper_shiftinterval').val()); e.chart.ShiftIsDown = false;
                                            //@Call mapper_checkdsid_s(true) : load new mapper graph for shift interval
                                            mapper_checkdsid_s(true);
                                        }
                                        }
                                    }
                                });
                                //@EventListener click on chartDiv
                                e.chart.chartDiv.addEventListener("click", function (ev) {
                                    // we track cursor's last known position by "changed" event
                                    if (e.chart.lastCursorPosition !== undefined) {
                                        //checks if shift Key is down
                                        if (ev.shiftKey) {
                                            // get date of the last known cursor position
                                            var date = e.chart.dataProvider[ e.chart.lastCursorPosition ][ e.chart.categoryField ];
                                            //checks if shiftData checkbox is checked
                                            if ($('#mapper_shiftdata').prop('checked')) {
                                                //checks if chart guide length is 0 [i.e. no flagged is present]
                                                if (e.chart.categoryAxis.guides.length == 0) {
                                                    //@guide AmCharts.Guide : initialize AmCharts.Guide()
                                                    var guide = new AmCharts.Guide();
                                                    //@Set guide.date to @date
                                                    guide.date = date;
                                                    guide.lineAlpha = 1;
                                                    //@Set guide.fillColor to green if guides.length is 0 else red
                                                    guide.fillColor = (e.chart.categoryAxis.guides.length === 0 ? "#00FF00" : "#FF0000");
                                                    //@Set guide.lineColor to green if guides.length is 0 else red
                                                    guide.lineColor = (e.chart.categoryAxis.guides.length === 0 ? "#00FF00" : "#FF0000");
                                                    //add @guide to e.chart.categoryAxis
                                                    e.chart.categoryAxis.addGuide(guide);
                                                    //@Set mapper_shiftdata_start to @date
                                                    $('#mapper_shiftdata_start label').html(date);
                                                } else {
                                                    //checks if guide.fillAlpha is not 0.5
                                                    if (e.chart.categoryAxis.guides[0].fillAlpha !== 0.5) {
                                                        //checks if @date > guides.date
                                                        if (new Date(date) > new Date(e.chart.categoryAxis.guides[0].date)) {
                                                            //@interval Date : get interval from chart's dataProvider by subtracting two dates
                                                            var interval = (new Date(e.chart.dataProvider[0].times)) - (new Date(e.chart.dataProvider[1].times));
                                                            interval = (interval < 0 ? (-1) : 1) * interval;
                                                            e.chart.categoryAxis.guides[0].fillAlpha = 0.5;
                                                            //@Set guide.toDate to date [i.e. todate defines end point]
                                                            e.chart.categoryAxis.guides[0].toDate = date;
                                                            //@Set mapper_shiftdata_end to @date
                                                            $('#mapper_shiftdata_end label').html(date);
                                                        } else {
                                                            //if @date < guides.date
                                                            //remove guide from chart
                                                            e.chart.categoryAxis.guides.splice(0, 1);
                                                            //@set mapper_shiftdata_start to N/A
                                                            $('#mapper_shiftdata_start label').html('N/A');
                                                            //@set mapper_shiftdata_end to N/A
                                                            $('#mapper_shiftdata_end label').html('N/A');
                                                        }
                                                    } else {
                                                        //if guide.fillAlpha is 0.5
                                                        //remove guide from chart
                                                        e.chart.categoryAxis.guides.splice(0, 1);
                                                        //@set mapper_shiftdata_start to N/A
                                                        $('#mapper_shiftdata_start label').html('N/A');
                                                        //@set mapper_shiftdata_end to N/A
                                                        $('#mapper_shiftdata_end label').html('N/A');
                                                    }
                                                }
                                            }
                                            e.chart.validateData();
                                        }
                                    }
                                });
                            }
                        }, {
                            "event": "changed",
                            "method": function (e) {
                                /**
                                 * Log cursor's last known position
                                 */
                                e.chart.lastCursorPosition = e.index;
                            }
                        }]
                });
            }
            /**
             * Mapped Graph
             * */
            // var map_Interval=$('#case_Interval').text();
            var mapped_chart = AmCharts.makeChart("mapped_chart", {
                "type": "serial",
                "theme": "light",
                "marginRight": 10,
                "dataProvider": [],
                "valueAxes": [{
                        "axisAlpha": 0.1
                    }],
                "graphs": [{
                        "id": "g2",
                        "balloonText": "[[title]]: [[value]]",
                        "lineThickness": 2,
                        "lineAlpha": 0.5,
                        "title": "Utility",
                        "lineColor": "#000000",
                        "valueField": "kWh"
                    }, {
                        "id": "g1",
                        "balloonText": "[[title]]: [[value]]",
                        "lineThickness": 1,
                        "title": "Platform",
                        "fillColorsField": "estimated",
                        "lineColorField": "estimated",
                        "valueField": "demand"
                    }, {
                        "id": "g3",
                        "balloonText": "[[title]]: [[value]]",
                        "lineThickness": 1,
                        "title": "Magcheck",
                        "fillColorsField": "estimated",
                        "lineColor": "#d50000",
                        "connect": false,
                        "dashLength": 5,
                        "valueField": "newPlatform"
                    }],
                "zoomOutButtonRollOverAlpha": 0.15,
                "chartCursor": {
                    "categoryBalloonDateFormat": "MMM DD JJ:NN",
                    "cursorPosition": "mouse",
                    "showNextAvailable": true
                },
                "autoMarginOffset": 5,
                "columnWidth": 1,
                "categoryField": "times",
                "categoryAxis": {
                    "minPeriod": $('#case_Interval').text() + "mm",
                    "parseDates": true
                },
                "chartScrollbar": {
                    "graph": "g1",
                    "oppositeAxis": false,
                    "offset": 30,
                    "scrollbarHeight": 30,
                    "backgroundAlpha": 0,
                    "selectedBackgroundAlpha": 0.1,
                    "selectedBackgroundColor": "#888888",
                    "graphFillAlpha": 0,
                    "graphLineAlpha": 0.5,
                    "selectedGraphFillAlpha": 0,
                    "selectedGraphLineAlpha": 1,
                    "autoGridCount": true,
                    "color": "#AAAAAA"
                },
                "chartScrollbarSettings": {
                    "graph": "g1",
                },
                "export": {
                    "enabled": false
                },
                "listeners": [{
                        "event": "init",
                        "method": function (e) {//on chart init this method will called
                            mappedChartValidate(e);
                        }
                    }, {
                        "event": "changed",
                        "method": function (e) {
                            /**
                             * Log cursor's last known position
                             */
                            e.chart.lastCursorPosition = e.index;
                        }
                    }, {
                        "event": "zoomed",
                        "method": function (e) {
                            console.log('..>>' + e.chart.rangeIndex[2]); //1
                            console.log('>>' + e.chart.rangeIndex.length); //3
                            console.log(e); //3
                            console.log('>>' + e.chart.rangeIndex);
                            //checks if rangeIndex[2] is 0 OR chart.rangeIndex.length is 0 
                            if (e.chart.rangeIndex[2] === undefined || e.chart.rangeIndex[2] === 0 || e.chart.rangeIndex.length === 0) {
                                //@Set chart.rangeIndex
                                e.chart.rangeIndex[0] = e.chart.startIndex;
                                e.chart.rangeIndex[1] = e.chart.endIndex;
                            }
                            console.log('>>' + e.chart.rangeIndex);
                        }
                    }]
            });
            zoomChart();
            /**
             * Zoom Mapper Chart
             * */
            function zoomChart() {
                chart.zoomToIndexes(chart.dataProvider.length - 40, chart.dataProvider.length - 1);
            }

            /**
             * Zoom Mapped Chart
             * @description zoomMappedChart(indexarr) 
             *              zoom mapped chart after validation to the same zoom level before validating chart
             * @param {arrray} indexarr "contains last zoom indexes[Start-End]"
             * */
            function zoomMappedChart(indexarr) {
                mapped_chart.zoomToIndexes(indexarr[0], indexarr[1]);
            }
            /**
             * Load Mapper Graph
             * @description load_mapper_graph(data, intervalShift, list_shiftRange)
             *              initialize mapper graph and set new data to dataProvider and validate graph
             * @param {json} data "contains JSON data for mapper chart's dataProvider"
             * @param {integer} intervalShift "contains shift count in mapper graph"
             * @param {array} list_shiftRange "contains start & end timestamp for shift mapper graph"
             * */
            function load_mapper_graph(data, intervalShift, list_shiftRange) {

                //@valueAxes JSON : value for amcharts key  "valueAxes"
                var valueAxes = [{"axisAlpha": 0.5}];
                //@Call initMapperGraph(valueAxes) : initialize mapper graph
                initMapperGraph(valueAxes);
                //@Set data into chart's dataprovider
                chart.dataProvider = data;
                //@interval Date : get interval from chart's dataProvider by subtracting two dates
                var interval = new Date(data[1].times).getTime() - new Date(data[0].times).getTime();
                interval = Math.abs(interval) / 3600000;
                //@Set chart's categoryAxis.minPeriod to minimum interval [1min, 5min, 15min..etc.]
                chart.categoryAxis.minPeriod = (interval * 60) + "mm";
                chart.validateData();
                //show mapper modal window
                $('#mapper_modal').modal('open');
                //fill start and end date in MagChek & Select inputs
                //alert(data[1].times);
                var start = data[0].times.split(' ')[0].trim().split('-');
                var end = data[data.length - 1].times.split(' ')[0].trim().split('-');
                $('#settlement_start_date input').val(start[1] + '/' + start[2] + '/' + start[0] + ' ' + data[1].times.split(' ')[1]);
                $('#mapper_magnitude_start input').val(start[1] + '/' + start[2] + '/' + start[0] + ' ' + data[1].times.split(' ')[1]);
//                $('#settlement_start_date input').val(data[0].times);
//                $('#settlement_end_date input').val(data[data.length - 1].times);
                //alert($('#mapper_settlement_validation_select').is(':disabled'));
                $('#settlement_end_date input').val(end[1] + '/' + end[2] + '/' + end[0] + ' ' + data[data.length - 1].times.split(' ')[1]);
                $('#mapper_magnitude_end input').val(end[1] + '/' + end[2] + '/' + end[0] + ' ' + data[data.length - 1].times.split(' ')[1]);
                bindDate('mapper_magnitude_start', data);
                bindDate('mapper_magnitude_end', data);
                bindDate('settlement_start_date', data);
                bindDate('settlement_end_date', data);
            }
            /**
             * Load Mapper Mag Graph
             * @description load_mapper_mag_graph(min_max_arr)
             *              initialize mapper graph and set new data to dataProvider and validate graph
             * @param {json} data "contains JSON data for mapper chart's dataProvider"
             * @param {integer} intervalShift "contains shift count in mapper graph"
             * @param {array} list_shiftRange "contains start & end timestamp for shift mapper graph"
             * */
            function load_mapper_mag_graph(min_max_arr) {
                //@dataMapper JSON : chart's  dataProvider 
                var dataMapper = chart.dataProvider;
                //@valueAxes JSON : value for amcharts key  "valueAxes", sets axis on both sides 
                var valueAxes = [{
                        "axisAlpha": 0.5,
                        "position": "left",
                        "id": "VPlatform",
                        "minimum": min_max_arr[0],
                        "maximum": min_max_arr[1]
                    }, {
                        "axisAlpha": 0.5,
                        "position": "right",
                        "id": "VUtility",
                        "minimum": min_max_arr[2],
                        "maximum": min_max_arr[3]
                    }, ];
                //@Call initMapperGraph(valueAxes) : initialize mapper graph
                initMapperGraph(valueAxes);
                //@Set data into chart's dataprovider from @dataMapper 
                chart.dataProvider = dataMapper;
                //@interval Date : get interval from chart's dataProvider by subtracting two dates
                var interval = new Date(dataMapper[1].times).getTime() - new Date(dataMapper[0].times).getTime();
                interval = Math.abs(interval) / 3600000;
                //@Set chart's categoryAxis.minPeriod to minimum interval [1min, 5min, 15min..etc.]
                chart.categoryAxis.minPeriod = (interval * 60) + "mm";
                chart.validateData();
            }
            /**
             * Load Mapped Graph
             * @description load_mapped_graph(data)
             *              load mapped graph and display data inside table
             * @param {json} data "contains JSON data for mapper chart's dataProvider"
             * */
            function load_mapped_graph(data, mnvData) {
                r('load_mapped_graph', '2890');
                mapped_chart.categoryAxis.guides.splice(0, mapped_chart.categoryAxis.guides.length);
                console.log(jflags);
                console.log(jflags.length);
                if (jflags.length > 1 && jflags[jflagscount].flag.length !== 0) {
                    //@interval integer : get interval from chart's dataProvider by subtracting two dates
                    var interval = (new Date(mapped_chart.dataProvider[0].times)) - (new Date(mapped_chart.dataProvider[1].times));
                    interval = (interval < 0 ? (-1) : 1) * interval;
//                                for (var i = 0; i < e.chart.categoryAxis.guides.length; i++) {
//                                    jflags[jflagscount].flag.push(e.chart.categoryAxis.guides[i].date);
//                                }
//                                console.log(jflagscount);
//                                console.log(jflags);
                    for (var i = 0; i < jflags[jflagscount].flag.length; i++) {
                        //@guide AmCharts.Guide : initialize AmCharts.Guide()
                        var guide = new AmCharts.Guide();
                        //@Set guide.date to @date + @interval
                        guide.date = new Date(new Date(jflags[jflagscount].flag[i]).getTime());
                        guide.lineAlpha = 1;
                        guide.fillColor = "#c7d4f2";
                        guide.fillAlpha = 0.5;
                        guide.toDate = new Date(new Date(jflags[jflagscount].flag[i]).getTime() + (interval));
                        guide.lineColor = "#c7d4f2";
                        //add @guide to e.chart.categoryAxis
                        mapped_chart.categoryAxis.addGuide(guide);
                        //@Set mapped_table_insert in @table to 'TRUE'
                        $('#mapped_table_insert' + new Date(new Date(jflags[jflagscount].flag[i]).getTime() + (interval * i)).getTime()).html('TRUE');
                        $('#mapped_table_insert' + new Date(new Date(jflags[jflagscount].flag[i]).getTime() + (interval * i)).getTime()).attr('class', 'flag');
                    }
                }
                r('load_mapped_graph', '2917');
                //@Set mapped_chart.dataProvider to @data
                mapped_chart.dataProvider = data;
                //console.log(mnvData.length);
                //setting MNV period
                for (var i = 0; i < mnvData.length; i++) {
                    var guide = new AmCharts.Guide();
                    guide.date = new Date(mnvData[i].mnvStart);
                    guide.toDate = new Date(mnvData[i].mnvEnd);
                    guide.lineAlpha = 0.3;
                    guide.lineColor = "#00f00";
                    guide.fillColor = "#00f00";
                    guide.fillAlpha = 0.3;
                    mapped_chart.categoryAxis.addGuide(guide);
                    console.log(mapped_chart.categoryAxis.guides.length + '>' + mnvData[i].mnvStart + '-' + mnvData[i].mnvEnd);
                }
                r('load_mapped_graph', '2936');
                mapped_chart.validateData();
                r('load_mapped_graph', '2938');
                /**
                 * Data table Load and display
                 * */
                //                Time Stamp	Platform Data	E. D. I.	Utility Data
                //                % Difference	Maxwell Flag	U.D.I.	Manual?	Insert?	UDI Value
                //@html string : "contains table for mapped tab data"
                var html = '';
                html += '<table id="example" class="display nowrap" cellspacing="0" width="100%" >';
                html += '   <thead>';
                html += '       <tr>';
                html += '           <th>Time Stamp</th>';
                html += '           <th>Platform Data</th>';
                html += '           <th>E. D. I.</th>';
                html += '           <th>Utility Data</th>';
                html += '           <th>% Difference</th>';
                html += '           <th>Maxwell Flag</th>';
                html += '            <th>Insert</th>';
                html += '           <th>U.D.I Value</th>';
                html += '       </tr>';
                html += '   </thead>';
                html += '<tbody>';
                //@interval Date : get interval from chart's dataProvider by subtracting two dates
                var interval = new Date(data[1].times).getTime() - new Date(data[0].times).getTime();
                r('load_mapped_graph', interval + '');
                interval = Math.abs(interval) / 3600000;
                r('load_mapped_graph', interval + '');
                r('load_mapped_graph', '2963');
                //this loop for datatable 
                for (var i = 0; i < data.length; i++) {
                    html += '<tr>';
                    //@diff number : [DEMAND - KWH] for percentage
                    var diff = (data[i].kWh === undefined ? '' : ((data[i].kWh + '' === '0') ? '#DIV/0!' : (Math.round((((data[i].demand - data[i].kWh) / data[i].kWh) * 100) * 100) / 100)));
                    //@diff2 number : [DEMAND - KWH] for value
                    var diff2 = (data[i].kWh === undefined ? '' : ((data[i].kWh + '' === '0') ? '#DIV/0!' : (data[i].demand - data[i].kWh)));
                    html += '<td>' + data[i].times + '</td>';
                    html += '<td style="text-align: right;">' + data[i].demand + '</td>';
                    html += '<td style="text-align: right;">' + (data[i].estimated === '#d50000' ? 0 : 1) + '</td>';
                    html += '<td style="text-align: right;">' + (data[i].kWh === undefined ? '' : data[i].kWh) + '</td>';
                    html += '<td style="text-align: right;' + (diff === '' ? '' : ((Math.abs(diff) > 2 && Math.abs(diff2) > (12 * interval)) ? 'background: red;' : (diff === '#DIV/0!' ? 'background: red;' : ''))) + '">' + (diff === '' ? '' : ((data[i].kWh === undefined || data[i].kWh + '' === '0') ? '#DIV/0!' : (Math.round((((data[i].demand - data[i].kWh) / data[i].kWh) * 100) * 100) / 100) + '%')) + '</td>';
                    html += '<td>' + '</td>';
                    html += '<td class="no-flag" id="mapped_table_insert' + new Date(data[i].times).getTime() + '" onclick="tableGraphFlag(this.id, ' + interval + ')">' + '</td>';
                    html += '<td>' + '</td>';
                    html += '</tr>';
                }
                r('load_mapped_graph', '2981');
                html += '</tbody>';
                //@heighttable number : height for table
                var heighttable = $('.wrap').height() - 110;
                //@Set @html table in .content
                $('.content').html(html);
                //initialize datatable for table[id=example]
                table = $('#example').DataTable({
                    aLengthMenu: [[5, 9], [5, 9]],
                    iDisplayLength: (1 / interval) * 24, //iDisplayLength: 50,
                    scrollY: heighttable,
                    dom: 'Bfrtip',
//                    "paging": false,
//                    "ordering": false,
//                    "info": false,
                    buttons: [
                        'copy', 'csv', 'excel', 'pdf', 'print'
                    ],
                    responsive: {
                        details: {
                            renderer: function (api, rowIdx, columns) {

                                var data = $.map(columns, function (col, i) {
                                    return col.hidden ?
                                            '<tr data-dt-row="' + col.rowIndex + '" data-dt-column="' + col.columnIndex + '">' +
                                            '<td>' + col.title + ':' + '</td> ' +
                                            '<td>' + col.data + '</td>' +
                                            '</tr>' :
                                            '';
                                }).join('');
                                return data ?
                                        $('<table/>').append(data) :
                                        false;
                            }
                        }
                    }
                });
                r('load_mapped_graph', '3016');
            }
            /**
             * Open Salesforce Modal
             * @description openSFFrame(link)
             *              open salesforce modal to browse salesforce.com
             * @param {string} link "contains link to browse caseid"
             * */
            function openSFFrame(link) {
                //@Set @link to #frame
                $("#frame").attr("src", link);
                //open salesforce iframe modal window
                $('#sf_iframe_modal').modal('open');
            }
            /**
             * Flag On Table
             * @description tableGraphFlag(id, interval)
             *              flag on mapped graph by clicking on table column "Insert"
             * @param {string} id "contains id to flag with respect to timestamp"
             * @param {string} interval "contains interval between two dates for respective case"
             * */
            function tableGraphFlag(id, interval) {
                //checks if id elment's text is BLANK
                if ($('#' + id).text().trim() === '') {
                    if ($('#csvFile').val() === '') {
                        var curTime = new Date(parseInt(id.trim().replace('mapped_table_insert', ''))).getTime();
                        var up;
                        var down;
                        var upLen = 0;
                        var downLen = 0;
                        var upLenCheck = true;
                        var downLenCheck = true;
                        var max = (20 / (interval * 60));
                        for (var i = 0; i < max; i++) {
                            up = $('#mapped_table_insert' + (curTime - ((i + 1) * interval * 3600000))).html();
                            down = $('#mapped_table_insert' + (curTime + ((i + 1) * interval * 3600000))).html();
                            if (up !== undefined && up === 'TRUE' && upLenCheck) {
                                upLen++;
                            } else {
                                upLenCheck = false;
                            }
                            if (down !== undefined && down === 'TRUE' && downLenCheck) {
                                downLen++;
                            } else {
                                downLenCheck = false;
                            }
                        }
                    }
                    console.log(upLen + '.........' + downLen);
                    var checkFlagCondition = false;
                    if (max === 4) {
                        checkFlagCondition = ((upLen === 4 && downLen === 0) || (upLen >= 3 && downLen === 1) || (upLen >= 2 && downLen === 2) || (upLen >= 1 && downLen === 3) || (upLen >= 0 && downLen === 4));
                    } else if (max === 20) {
                        checkFlagCondition = (
                                (upLen === 20 && downLen === 0) ||
                                (upLen >= 19 && downLen === 1) ||
                                (upLen >= 18 && downLen === 2) ||
                                (upLen >= 17 && downLen === 3) ||
                                (upLen >= 16 && downLen === 4) ||
                                (upLen >= 15 && downLen === 5) ||
                                (upLen >= 14 && downLen === 6) ||
                                (upLen >= 13 && downLen === 7) ||
                                (upLen >= 12 && downLen === 8) ||
                                (upLen >= 11 && downLen === 9) ||
                                (upLen >= 10 && downLen === 10) ||
                                (upLen >= 9 && downLen === 11) ||
                                (upLen >= 8 && downLen === 12) ||
                                (upLen >= 7 && downLen === 13) ||
                                (upLen >= 6 && downLen === 14) ||
                                (upLen >= 5 && downLen === 15) ||
                                (upLen >= 4 && downLen === 16) ||
                                (upLen >= 3 && downLen === 17) ||
                                (upLen >= 2 && downLen === 18) ||
                                (upLen >= 1 && downLen === 19) ||
                                (upLen >= 0 && downLen === 20)
                                );
                    }
                    if ($('#csvFile').val() === '' && checkFlagCondition) {
                        $('#notification_modal_message').html('Can\'t flag intervals more than <strong> 20 mins </strong> for <strong>UDI</strong> cases.');
                        $('#notification_modal').modal('open');
//                        return;
                    } else {




                        //@guide AmCharts.Guide : initialize AmCharts.Guide()
                        var guide = new AmCharts.Guide();
                        //@Set guide.date to date [get it from id]
                        guide.date = new Date(parseInt(id.trim().replace('mapped_table_insert', '')));
                        guide.fillColor = "#c7d4f2";
                        guide.lineAlpha = 1;
                        guide.lineColor = "#c7d4f2";
                        guide.fillAlpha = 0.5;
                        //@Set guide.date to date [get it from id] + interval
                        guide.toDate = new Date(new Date(parseInt(id.trim().replace('mapped_table_insert', ''))).getTime() + (interval * 3600000));
                        //add @guide to e.chart.categoryAxis
                        mapped_chart.categoryAxis.addGuide(guide);
                        //@Set id to TRUE
                        $('#' + id).html('TRUE');
//                        $('#' + id).attr('class', 'flag');
                        jflags[jflagscount].flag.push(new Date(parseInt(id.trim().replace('mapped_table_insert', ''))));
                        jflags[jflagscount].flagTime.push(new Date(parseInt(id.trim().replace('mapped_table_insert', ''))).getTime());
                        mapped_chart.validateData();
                        console.log( jflags[jflagscount]);
                    }
                } else {
                    //if id elment's text is not BLANK
                    mapped_chart.categoryAxis.guides;
                    //this loop for categoryAxis.guides
                    for (var i = 0; i < mapped_chart.categoryAxis.guides.length; i++) {
                        //checks if categoryAxis.guides.date === date [get it from id]
                        if (new Date(mapped_chart.categoryAxis.guides[i].date).toString() === new Date(parseInt(id.trim().replace('mapped_table_insert', ''))).toString()) {
                            //remove flag/unflag by categoryAxis.guides.splice
                            mapped_chart.categoryAxis.guides.splice(i, 1);
                            //@Set id to ''
                            $('#' + id).html('');
                            $('#' + id).parent().children().eq(7).html('');
//                            $('#' + id).attr('class', 'no-flag');
                            jflags[jflagscount].flag.splice(0, jflags[jflagscount].flag.length);
                            jflags[jflagscount].flagTime.splice(0, jflags[jflagscount].flagTime.length);
                            for (var i = 0; i < mapped_chart.categoryAxis.guides.length; i++) {
                                jflags[jflagscount].flag.push(mapped_chart.categoryAxis.guides[i].date);
                            jflags[jflagscount].flagTime.push(new Date(mapped_chart.categoryAxis.guides[i].date).getTime());
                            }
                        }
                    }
                    mapped_chart.validateData();
                    console.log( jflags[jflagscount]);
                }

            }
            /**
             * Unused Methods
             * */
            function datatableUtilityData() {
                $('#utilityTimestamp table').attr('id', 'utilitydata_datatable');
                $('#utilityTimestamp table').attr('class', 'display nowrap');
                $('#utilitydata_datatable').DataTable({
                    aLengthMenu: [[5, 9], [5, 9]],
                    //lengthMenu: [ [10, 25, 50, -1], [10, 25, 50, "All"] ],
                    iDisplayLength: 50,
                    scrollY: $('#utilitydata_tab').height() - 190,
                    dom: 'Bfrtip',
                    buttons: [
                        'copy', 'csv', 'excel', 'pdf', 'print'
                    ],
                    responsive: {
                        details: {
                            renderer: function (api, rowIdx, columns) {

                                var data = $.map(columns, function (col, i) {
                                    return col.hidden ?
                                            '<tr data-dt-row="' + col.rowIndex + '" data-dt-column="' + col.columnIndex + '">' +
                                            '<td>' + col.title + ':' + '</td> ' +
                                            '<td>' + col.data + '</td>' +
                                            '</tr>' :
                                            '';
                                }).join('');
                                return data ?
                                        $('<table/>').append(data) :
                                        false;
                            }
                        }
                    }
                });
                $('#utilitydata_datatable_filter label').attr('style', 'color:  #ffffff;');
                $('#utilitydata_datatable_filter label').html('<input type="search" class="" placeholder="Search Utility" aria-controls="example" style="height: 2rem;margin:0;border-bottom: 1px solid #ffffff;" >')
                $('#utilitydata_datatable_filter label input').attr('style', 'height: 2rem;margin:0;border-bottom: 1px solid #ffffff;');
            }
            /**
             * Unused Methods
             * */
            function datatablePlatformData() {
                $('#platformTimestamp table').attr('id', 'platformdata_datatable');
                $('#platformTimestamp table').attr('class', 'display nowrap');
                $('#platformdata_datatable').DataTable({
                    aLengthMenu: [[5, 9], [5, 9]],
                    //lengthMenu: [ [10, 25, 50, -1], [10, 25, 50, "All"] ],
                    iDisplayLength: 50,
                    scrollY: $('#platformdata_tab').height() - 190,
                    dom: 'Bfrtip',
                    buttons: [
                        'copy', 'csv', 'excel', 'pdf', 'print'
                    ],
                    responsive: {
                        details: {
                            renderer: function (api, rowIdx, columns) {

                                var data = $.map(columns, function (col, i) {
                                    return col.hidden ?
                                            '<tr data-dt-row="' + col.rowIndex + '" data-dt-column="' + col.columnIndex + '">' +
                                            '<td>' + col.title + ':' + '</td> ' +
                                            '<td>' + col.data + '</td>' +
                                            '</tr>' :
                                            '';
                                }).join('');
                                return data ?
                                        $('<table/>').append(data) :
                                        false;
                            }
                        }
                    }
                });
                $('#platformdata_datatable_filter label').attr('style', 'color:  #ffffff;');
                $('#platformdata_datatable_filter label').html('<input type="search" class="" placeholder="Search Platform" aria-controls="example" style="height: 2rem;margin:0;border-bottom: 1px solid #ffffff;" >')
                $('#platformdata_datatable_filter label input').attr('style', 'height: 2rem;margin:0;border-bottom: 1px solid #ffffff;');
            }
            /**
             * Unused Methods
             * */
            function navItemCollapse(item) {
                if ($(item).html() === '<i class="material-icons">remove_circle_outline</i>') {
                    $(item).html('<i class="material-icons">add_circle_outline</i>');
                } else {
                    $(item).html('<i class="material-icons">remove_circle_outline</i>');
                }
            }
            /**
             * Edit Validation Table 
             * @description editValidationplatformStartdate()
             *              edit validation table to change date (start-end), Peak
             * */
            function editValidationplatformStartdate() {
                //checks if input_valid_platform_start_date is EMPTY  
                if ($('#input_valid_platform_start_date').length === 0) {
                    $('#valid_platform_start_date').html('<input type="text" id="input_valid_platform_start_date" value="' + $('#valid_platform_start_date').html() + '"/>');
                }
                //checks if input_valid_platform_end_date is EMPTY  
                if ($('#input_valid_platform_end_date').length === 0) {
                    $('#valid_platform_end_date').html('<input type="text" id="input_valid_platform_end_date" value="' + $('#valid_platform_end_date').html() + '"/>');
                }
                //*checks if input_valid_platform_peak is EMPTY  
                if ($('#input_valid_platform_peak').length === 0) {
                    $('#valid_platform_usage').html('<input type="text" id="input_valid_platform_peak" value="' + $('#valid_platform_usage').html() + '"/>');
                }
            }
            /**
             * Unused Methods
             * */
            function editValidationEnddate(item) {
                if ($('#editable_table2').length === 0) {
                    $(item).html('<input type="text" id="input_valid_platform_end_date" value="' + $(item).html() + '"/>');
                }
            }
            /**
             * Unused Methods
             * */
            function editValidationPlatformUsage(item) {
                if ($('#editable_table2').length === 0) {
                    $(item).html('<input type="text" id="input_valid_platform_usage" value="' + $(item).html() + '"/>');
                }
            }









            /**
             * Unused Methods
             * */
            function openMagCheck() {
                document.getElementById('magCheck').style.display = 'block';
            }
            /**
             * Unused Methods
             * */
            function openLogin() {
                // alert('1');
                document.getElementById('input_tab').style.opacity = 0.2;
                //alert('2');
                document.getElementById("login_forum").style.display = "block";
            }

            function bindDate(id, data) {
                //mapper_magnitude_end
                console.log('bindDate' + id);
                var $jqendDate = jQuery('input[name="' + id + '"]');
                //Bind keyup/keydown to the input
                $jqendDate.bind('keyup', 'keypress', function (e) {
                    //To accomdate for backspacing, we detect which key was pressed - if backspace, do nothing:
                    if (e.which !== 8) {
                        var numChars = $jqendDate.val().length;
                        if (numChars > 19) {
                            $jqDate.val($jqDate.val().substring(0, 18));
                            return;
                        }
                        if (numChars === 2 || numChars === 5) {
                            var thisVal = $jqendDate.val();
                            thisVal += '/';
                            $jqendDate.val(thisVal);
                        }
                        if (numChars === 10) {
                            var thisVal = $jqendDate.val();
                            thisVal += ' ';
                            $jqendDate.val(thisVal);
                        }
                        if (numChars === 13 || numChars === 16) {
                            var thisVal = $jqendDate.val();
                            thisVal += (numChars === 13 ? ':' : ':00');
                            $jqendDate.val(thisVal);
                        }
                    }
                });
                $(function () {
                    var result = '{';
                    for (var i = 0; i < data.length; i++) {
                        var date = data[i].times.split(' ')[0].trim().split('-');
                        result += '"' + date[1] + '/' + date[2] + '/' + date[0] + ' ' + data[i].times.split(' ')[1] + '": null';
                        result += ((i + 1) === data.length ? '' : ',');
                    }

                    result += '}';
                    $('#' + id + ' input').autocomplete({
                        data: JSON.parse(result),
                        limit: 8
                    });
                    $('#' + id + ' ul').attr('style', 'position: absolute;bottom: 90px;');
                });
            }


            function r(name, line) {
//                console.error('line:[' + line + ']  name >' + name + ' : ' + new Date());
            }
            function mappedChartValidate(e) {

                /**
                 * Pre-zoom
                 */
                //e.chart.zoomToIndexes(e.chart.dataProvider.length - 40, e.chart.dataProvider.length - 1);



                //@Set CtrlIsDown in e.chart [i.e. default value is set to False, ctrl button is currently not pressed]
                e.chart.CtrlIsDown = false;
                //@Set ShiftIsDown in e.chart [i.e. default value is set to False, shift button is currently not pressed]
                e.chart.ShiftIsDown = false;
                //@EventListener keyUp
                document.body.onkeyup = function (ev) {
                    //checks if up key value is 17 [i.e. Ctrl Key]
                    if (ev.keyCode === 17 && createInserts) {
                        //@Set e.chart.CtrlIsDown to false
                        e.chart.CtrlIsDown = false;
                        //@Set mapped_keys_info to ''
                        $('#mapped_keys_info').html('');
                        $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: black;font-weight: bold;');
                    }
                    //checks if up key value is 16 [i.e. Shift Key]
                    if (ev.keyCode === 16 && createInserts) {
                        //@Set mapped_keys_info to ''
                        $('#mapped_keys_info').html('');
                        $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: black;font-weight: bold;');
                        //checks if CtrlIsDown 
                        if (e.chart.CtrlIsDown) {
                            //@Set mapped_keys_info to 'Multi Flagging'
                            $('#mapped_keys_info').html('Multi Flagging');
                            //checks if chart.range.length is 0
                            if (e.chart.range.length === 0) {
                                $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: red;font-weight: bold;');
                            } else {
                                $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: green;font-weight: bold;');
                            }
                        }
                    }
                };
                //@EventListener keyDown
                document.body.onkeydown = function (ev) {
                    //checks if down key value is 17 [i.e. Ctrl Key]
                    if (ev.keyCode === 17 && createInserts) {
                        //@Set e.chart.CtrlIsDown to true
                        e.chart.CtrlIsDown = true;
                        //@Set mapped_keys_info to 'Multi Flagging'
                        $('#mapped_keys_info').html('Multi Flagging');
                        //checks if chart.range.length is 0
                        if (e.chart.range.length === 0) {
                            $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: red;font-weight: bold;');
                        } else {
                            $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: green;font-weight: bold;');
                        }
                    }
                    //checks if down key value is 16 [i.e. Shift Key]
                    if (ev.keyCode === 16 && createInserts) {
                        //checks if e.chart.CtrlIsDown 
                        if (e.chart.CtrlIsDown) {
                            $('#mapped_keys_info').html('Single Flagging');
                            $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: black;font-weight: bold;');
                        }
                    }
                }
                //@Set range in e.chart array [i.e. default empty, used for multi flagging(Start-End)]
                e.chart.range = [];
                //@Set rangeIndex in e.chart array [i.e. default empty, used for manage zoomMappedChart after flagging or validating chart(rangeIndex[0]= zoomStartIndex & rangeIndex[1]=zoomEndIndex & rangeIndex[2]= 0/1 0=>add last zoom index/change, 1=>no changes made)]
                e.chart.rangeIndex = [];
                /**
                 * Add click event on the plot area
                 */
                e.chart.chartDiv.addEventListener("click", function (ev) {
                    r('flag_click', '3088:1');
//                    $('#mapped_chart_overlay').removeAttr('style');
                    //checks if ctrl key is DOWN
                    if (ev.ctrlKey && createInserts) {
                        // we track cursor's last known position by "changed" event
                        if (e.chart.lastCursorPosition !== undefined) {
                            // get date of the last known cursor position
                            var date = e.chart.dataProvider[ e.chart.lastCursorPosition ][ e.chart.categoryField ];
                            //checks if shift key is UP
                            if (!ev.shiftKey) {
                                //checks if chart.range.length is 2
                                if (e.chart.range.length === 2) {
                                    //@Set chart.range to EMPTY
                                    e.chart.range = [];
                                }
                                //push @date into chart.range
                                e.chart.range.push(date);
                                //checks if chart.range.length is 1
                                if (e.chart.range.length === 1) {
                                    //@Set mapped_keys_info to color GREEN
                                    $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: green;font-weight: bold;');
                                }
                            } else {
                                //@Set if shift key is DOWN  chart.range to EMPTY
                                e.chart.range = [];
                            }
                            // create a new guide or update position of the previous one
                            //@checkFlag boolean : 
                            var checkFlag = true;
                            //@countUnflag integer : 
                            var countUnflag = 0;
                            //@countStartUnflag integer : 
                            var countStartUnflag = 0;
                            //this loop for remove categoryAxis.guides / UNFLAG
                            r('flag_loop', '3121:2');
                            //checks if shift key is UP
                            for (var ii = 0; ii < e.chart.categoryAxis.guides.length; ii++) {
                                if (!ev.shiftKey) {//multi unflag
                                    //checks if chart.range.length is 2 
                                    //          chart.range[1] <= categoryAxis.guide.date <= chart.range[0]
                                    //          chart.range[0] > chart.range[1]
                                    if (e.chart.range.length === 2 &&
                                            (new Date(e.chart.categoryAxis.guides[ii].date).getTime()
                                                    <= new Date(e.chart.range[0]).getTime())
                                            && (new Date(e.chart.categoryAxis.guides[ii].date).getTime()
                                                    >= new Date(e.chart.range[1]).getTime())
                                            && (new Date(e.chart.range[0]).getTime()
                                                    > new Date(e.chart.range[1]).getTime())
                                            && (e.chart.categoryAxis.guides[ii].fillColor !== '#00f00')) {
                                        //@Set @checkFlag to FALSE
                                        checkFlag = false;
                                        //@countUnflag increase by 1
                                        countUnflag++;
                                        //@Set countStartUnflag to (ii for ==0 else countStartUnflag) 
                                        countStartUnflag = (countStartUnflag === 0 ? ii : countStartUnflag);
                                    }
                                } else {//single unflag
                                    //checks if categoryAxis.guides.date === @date
                                    if (new Date(e.chart.categoryAxis.guides[ii ].date).toString() === new Date(date).toString()) {
                                        //remove guide/unflag
                                        e.chart.categoryAxis.guides.splice(ii, 1);
                                        //@Set @checkFlag to FALSE
                                        checkFlag = false;
                                        //*@Set @table._iDisplayLength to dataProvider.length
                                        //*AKS*table.context[0]._iDisplayLength = 5000;
                                        //*AKS*table.draw();
                                        //@Set mapped_table_insert in @table to ''
                                        //*AKS*$('#mapped_table_insert' + new Date(date).getTime()).html('');
                                        //*@Set @table._iDisplayLength to Interval/day
                                        //*AKS*table.context[0]._iDisplayLength = 50;
                                        //*AKS*table.draw();
                                        jflags[jflagscount].flag.splice(0, jflags[jflagscount].flag.length);
                                        for (var i = 0; i < e.chart.categoryAxis.guides.length; i++) {
                                            jflags[jflagscount].flag.push(e.chart.categoryAxis.guides[i].date);
                                        }
                                        console.log(jflagscount);
                                        console.log(jflags);
                                    }
                                }
                            }
                            r('flag_loop_end', '3166:-2');
                            //checks if @checkFlag is FALSE && @countUnflag !== 0
                            if (!checkFlag && (countUnflag !== 0)) {
                                r('multi_unflag', '3170:3');
                                //*@Set @table._iDisplayLength to dataProvider.length
                                //*AKS*table.context[0]._iDisplayLength = 5000;
                                //*AKS*table.draw();
                                //this loop for unflag from @table
                                for (var uf = (countUnflag === e.chart.categoryAxis.guides.length ? countStartUnflag - 1 : countStartUnflag); uf < countUnflag; uf++) {
                                    //@Set mapped_table_insert in @table to ''
                                    //*AKS*$('#mapped_table_insert' + new Date(e.chart.categoryAxis.guides[uf].date).getTime()).html('');
                                }
                                //*@Set @table._iDisplayLength to Interval/day
                                //*AKS*table.context[0]._iDisplayLength = 50;
                                //*AKS*table.draw();
                                //Unflag from mapped chart (categoryAxis.guides.splice)
                                e.chart.categoryAxis.guides.splice((countUnflag === e.chart.categoryAxis.guides.length ? countStartUnflag - 1 : countStartUnflag), countUnflag);
//                                            console.log(countStartUnflag+', '+countUnflag+', '+e.chart.categoryAxis.guides.length)
//                                            console.log(e.chart.categoryAxis.guides)
//                                            for (var ii = countStartUnflag; ii < countUnflag; ii++) {
//                                                if (e.chart.categoryAxis.guides[ii].fillColor !== '#00f00') {
//                                                    e.chart.categoryAxis.guides.splice(countStartUnflag,1);
//                                                    console.log(e.chart.categoryAxis.guides[ii].fillColor);
//                                                }
//                                            }
                                jflags[jflagscount].flag.splice(0, jflags[jflagscount].flag.length);
                                for (var i = 0; i < e.chart.categoryAxis.guides.length; i++) {
                                    jflags[jflagscount].flag.push(e.chart.categoryAxis.guides[i].date);
                                }
                                console.log(jflagscount);
                                console.log(jflags);
                                r('multi_unflag_end', '3170:-3');
                            }
                            //checks if @checkFlag is TRUE && shiftKey is DOWN (range.length === 0 )/shiftKey is UP (range.length === 2 )
                            if (checkFlag && (ev.shiftKey ? e.chart.range.length === 0 : e.chart.range.length === 2)) {
                                //@interval integer : get interval from chart's dataProvider by subtracting two dates
                                var interval = (new Date(e.chart.dataProvider[0].times)) - (new Date(e.chart.dataProvider[1].times));
                                interval = (interval < 0 ? (-1) : 1) * interval;
                                //checks if chart.range.length is 2
                                var max = (20 / ((interval / 3600000) * 60));
                                if (e.chart.range.length === 2) {
                                    //@count integer : count total timestamp
                                    var count = new Date(e.chart.range[1]) - new Date(e.chart.range[0]);
                                    count = count / interval;
                                    console.log((count + 1) + '........' + ((count + 1) > max) + '........' + max)
                                    if ($('#csvFile').val() === '' && (count + 1) > max) {
                                        $('#notification_modal_message').html('Can\'t flag intervals more than <strong> 20 mins </strong> for <strong>UDI</strong> cases.');
                                        $('#notification_modal').modal('open');
                                    } else {
                                        //*@Set @table._iDisplayLength to dataProvider.length
                                        //*AKS*table.context[0]._iDisplayLength = 5000;
                                        //*AKS*table.draw();
                                        //this loop for flagging upto @count 
                                        for (var i = 0; i < (count + 1); i++) {
                                            if (true) {
                                                //@guide AmCharts.Guide : initialize AmCharts.Guide()
                                                var guide = new AmCharts.Guide();
                                                //@Set guide.date to @date + @interval
                                                guide.date = new Date(new Date(e.chart.range[0]).getTime() + (interval * i));
                                                guide.lineAlpha = 1;
                                                guide.fillColor = "#c7d4f2";
                                                guide.fillAlpha = 0.5;
//                                                guide.toDate = new Date(new Date(e.chart.range[0]).getTime() - (interval * (i + 1)));
                                                guide.toDate = new Date(new Date(guide.date).getTime() - (interval));
                                                guide.lineColor = "#c7d4f2";
                                                //add @guide to e.chart.categoryAxis
                                                e.chart.categoryAxis.addGuide(guide);
                                                //@Set mapped_table_insert in @table to 'TRUE'
                                                //*AKS*$('#mapped_table_insert' + new Date(new Date(e.chart.range[0]).getTime() + (interval * i)).getTime()).html('TRUE');
                                                jflags[jflagscount].flag.push(guide.date);
                                                jflags[jflagscount].flagTime.push(new Date(guide.date).getTime());
                                                console.log(jflagscount);
                                                console.log(jflags);
                                            }
                                        }
                                        //*@Set @table._iDisplayLength to Interval/day
                                        //*AKS*table.context[0]._iDisplayLength = 50;
                                        //*AKS*table.draw();
                                        //@Set mapped_keys_info to color RED
                                        $('#mapped_keys_info').attr('style', 'font-size: 1rem;color: red;font-weight: bold;');
//                                                jflags[jflagscount].flag.splice(0,jflags[jflagscount].flag.length);
                                    }
                                } else {

                                    if ($('#csvFile').val() === '') {
                                        var curTime = new Date(date).getTime();
                                        var up;
                                        var down;
                                        var upLen = 0;
                                        var downLen = 0;
                                        var upLenCheck = true;
                                        var downLenCheck = true;
                                        for (var i = 0; i < max; i++) {
                                            up = (jflags[jflagscount].flagTime.indexOf((curTime - ((i + 1) * interval))) >= 0 ? 'TRUE' : '');
                                            down = (jflags[jflagscount].flagTime.indexOf((curTime + ((i + 1) * interval))) >= 0 ? 'TRUE' : '');
                                            if (up !== undefined && up === 'TRUE' && upLenCheck) {
                                                upLen++;
                                            } else {
                                                upLenCheck = false;
                                            }
                                            if (down !== undefined && down === 'TRUE' && downLenCheck) {
                                                downLen++;
                                            } else {
                                                downLenCheck = false;
                                            }
                                        }
                                    }
                                    console.log(upLen + '.........' + downLen);
                                    var checkFlagCondition = false;
                                    if (max === 4) {
                                        checkFlagCondition = ((upLen === 4 && downLen === 0) || (upLen >= 3 && downLen === 1) || (upLen >= 2 && downLen === 2) || (upLen >= 1 && downLen === 3) || (upLen >= 0 && downLen === 4));
                                    } else if (max === 20) {
                                        checkFlagCondition = (
                                                (upLen === 20 && downLen === 0) ||
                                                (upLen >= 19 && downLen === 1) ||
                                                (upLen >= 18 && downLen === 2) ||
                                                (upLen >= 17 && downLen === 3) ||
                                                (upLen >= 16 && downLen === 4) ||
                                                (upLen >= 15 && downLen === 5) ||
                                                (upLen >= 14 && downLen === 6) ||
                                                (upLen >= 13 && downLen === 7) ||
                                                (upLen >= 12 && downLen === 8) ||
                                                (upLen >= 11 && downLen === 9) ||
                                                (upLen >= 10 && downLen === 10) ||
                                                (upLen >= 9 && downLen === 11) ||
                                                (upLen >= 8 && downLen === 12) ||
                                                (upLen >= 7 && downLen === 13) ||
                                                (upLen >= 6 && downLen === 14) ||
                                                (upLen >= 5 && downLen === 15) ||
                                                (upLen >= 4 && downLen === 16) ||
                                                (upLen >= 3 && downLen === 17) ||
                                                (upLen >= 2 && downLen === 18) ||
                                                (upLen >= 1 && downLen === 19) ||
                                                (upLen >= 0 && downLen === 20)
                                                );
                                    }
                                    if ($('#csvFile').val() === '' && checkFlagCondition) {
                                        $('#notification_modal_message').html('Can\'t flag intervals more than <strong> 20 mins </strong> for <strong>UDI</strong> cases.');
                                        $('#notification_modal').modal('open');
//                        return;
                                    } else {
                                        r('single_flag', '3240:4');
                                        var guide = new AmCharts.Guide();
                                        //@Set guide.date to @date + @interval
                                        guide.date = date;
                                        guide.lineAlpha = 1;
                                        guide.fillColor = "#c7d4f2";
                                        guide.fillAlpha = 0.5;
                                        guide.toDate = new Date(new Date(date).getTime() - interval);
                                        guide.lineColor = "#c7d4f2";
                                        //add @guide to e.chart.categoryAxis
                                        e.chart.categoryAxis.addGuide(guide);
                                        //*@Set @table._iDisplayLength to dataProvider.length
                                        r('table.draw()A', '3253');
                                        //*AKS*table.context[0]._iDisplayLength = mapped_chart.dataProvider.length;
                                        //*AKS*table.draw();
                                        r('table.draw()_doneA', '3256');
                                        //@Set mapped_table_insert in @table to 'TRUE'
                                        //*AKS*$('#mapped_table_insert' + new Date(date).getTime()).html('TRUE');
                                        r('table.draw()', '3259');
                                        //*@Set @table._iDisplayLength to Interval/day
                                        //*AKS*table.context[0]._iDisplayLength = 50;
                                        //*AKS*table.draw();
                                        r('table.draw()_done', '3262');
//                                                jflags[jflagscount].flag.splice(0,jflags[jflagscount].flag.length);
                                        jflags[jflagscount].flag.push(new Date(date));
                                        jflags[jflagscount].flagTime.push(new Date(date).getTime());
                                        //console.log('AKASH');
                                        console.log(e.chart.rangeIndex);
                                        r('single_flag_done', '3266:-4');
                                    }
                                }
                            }
                            //@Set rangeIndex[2] to  1[i.e. zoom index not changed on zoom change]
                            e.chart.rangeIndex[2] = 1;
                            //@Call zoomMappedChart
                            zoomMappedChart(e.chart.rangeIndex);
                            e.chart.validateData();
                            //@Call zoomMappedChart                        
                            zoomMappedChart(e.chart.rangeIndex);
                            //@Set rangeIndex[2] to  0[i.e. zoom index will change on zoom change]
                            e.chart.rangeIndex[2] = 0;
                            r('flag_done', '3273:-1');
                        }
                    }
//                            $('#mapped_chart_overlay').attr('style','display: none;');
                });
            }
        </script>


    </body>
</html>

<!-- initMapperGraph-->





















